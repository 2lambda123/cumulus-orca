(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{108:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=r.a.createContext({}),b=function(e){var t=r.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=b(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(a),u=n,m=p["".concat(o,".").concat(u)]||p[u]||d[u]||i;return a?r.a.createElement(m,l(l({ref:t},s),{},{components:a})):r.a.createElement(m,l({ref:t},s))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},88:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return b}));var n=a(3),r=a(7),i=(a(0),a(108)),o={id:"deployment-with-cumulus",title:"Deploying ORCA with Cumulus",description:"Provides developer information for ORCA code deployment with Cumulus."},l={unversionedId:"developer/deployment-guide/deployment-with-cumulus",id:"developer/deployment-guide/deployment-with-cumulus",isDocsHomePage:!1,title:"Deploying ORCA with Cumulus",description:"Provides developer information for ORCA code deployment with Cumulus.",source:"@site/docs/developer/deployment-guide/deployment-with-cumulus.md",slug:"/developer/deployment-guide/deployment-with-cumulus",permalink:"/cumulus-orca/docs/developer/deployment-guide/deployment-with-cumulus",editUrl:"https://github.com/nasa/cumulus-orca/edit/develop/website/docs/developer/deployment-guide/deployment-with-cumulus.md",version:"current",sidebar:"dev_guide",previous:{title:"Creating the Glacier Bucket",permalink:"/cumulus-orca/docs/developer/deployment-guide/deployment-s3-bucket"},next:{title:"Testing Deployment",permalink:"/cumulus-orca/docs/developer/deployment-guide/testing_deployment"}},c=[{value:"Configuring the Cumulus Deployment to use ORCA",id:"configuring-the-cumulus-deployment-to-use-orca",children:[{value:"Modifying <code>cumulus-tf/main.tf</code>",id:"modifying-cumulus-tfmaintf",children:[]},{value:"Modifying <code>cumulus-tf/variables.tf</code>",id:"modifying-cumulus-tfvariablestf",children:[]},{value:"Modifying <code>cumulus-tf/terraform.tfvars</code>",id:"modifying-cumulus-tfterraformtfvars",children:[]}]},{value:"Configuring ORCA as a Standalone Module with Cumulus",id:"configuring-orca-as-a-standalone-module-with-cumulus",children:[{value:"Configure Terraform",id:"configure-terraform",children:[]},{value:"Create the <code>terraform.tfvars</code> file.",id:"create-the-terraformtfvars-file",children:[]},{value:"Create the <code>variables.tf</code> file.",id:"create-the-variablestf-file",children:[]},{value:"Modifying <code>cumulus-tf/terraform.tfvars</code>",id:"modifying-cumulus-tfterraformtfvars-1",children:[]}]},{value:"Define the ORCA Wokflows",id:"define-the-orca-wokflows",children:[{value:"Add the Copy To Glacier Step to an Ingest Workflow",id:"add-the-copy-to-glacier-step-to-an-ingest-workflow",children:[]},{value:"Modify the Recovery Workflow (<em>OPTIONAL</em>)",id:"modify-the-recovery-workflow-optional",children:[]}]},{value:"ORCA Variables",id:"orca-variables",children:[]},{value:"Deploy ORCA with Terraform",id:"deploy-orca-with-terraform",children:[]},{value:"Collection Configuration",id:"collection-configuration",children:[]},{value:"Enable <code>Recover Granule</code> Button",id:"enable-recover-granule-button",children:[]}],s={rightToc:c};function b(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("div",{className:"admonition admonition-important alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Prior to following this document, make sure that your ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/cumulus-orca/docs/developer/deployment-guide/deployment-environment"}),"deployment environment"),"\nis setup and an ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/cumulus-orca/docs/developer/deployment-guide/deployment-s3-bucket"}),"ORCA archive glacier bucket")," is\ncreated."))),Object(i.b)("p",null,"ORCA is meant to be deployed with Cumulus. There are two methods for deploying\nORCA. The first method involves modifying files in the Cumulus ",Object(i.b)("inlineCode",{parentName:"p"},"cumulus-tf"),"\ndeployment to deploy ORCA with Cumulus. The second method involves deploying ORCA\nas a separate module after the Cumulus deployment."),Object(i.b)("p",null,"The general steps to deploy ORCA are:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Configure the ORCA deployment using one of the two methods."),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#define-the-orca-wokflows"}),"Define the ORCA Ingest and Recovery workflows.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#deploy-orca-with-terraform"}),"Deploy ORCA using terraform.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"#collection-configuration"}),"Configure ORCA in the collection configuration of the running Cumulus instance."))),Object(i.b)("h2",{id:"configuring-the-cumulus-deployment-to-use-orca"},"Configuring the Cumulus Deployment to use ORCA"),Object(i.b)("p",null,"Follow the instructions for ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://nasa.github.io/cumulus/docs/deployment/deployment-readme"}),"deploying Cumulus"),"\non the Cumulus website through the configuration of the Cumulus module ",Object(i.b)("inlineCode",{parentName:"p"},"cumulus-tf"),"."),Object(i.b)("p",null,"Prior to deploying the ",Object(i.b)("inlineCode",{parentName:"p"},"cumulus-tf")," module, the following files need to be\nmodified to deploy ORCA with Cumulus."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"main.tf"),Object(i.b)("li",{parentName:"ul"},"variables.tf"),Object(i.b)("li",{parentName:"ul"},"terraform.tfvars")),Object(i.b)("h3",{id:"modifying-cumulus-tfmaintf"},"Modifying ",Object(i.b)("inlineCode",{parentName:"h3"},"cumulus-tf/main.tf")),Object(i.b)("p",null,"At the end of the ",Object(i.b)("inlineCode",{parentName:"p"},"main.tf")," file, add the following code and update the source\nvariable."),Object(i.b)("div",{className:"admonition admonition-important alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"Only change the value of source")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Only change the value of ",Object(i.b)("inlineCode",{parentName:"p"},"source")," in the code example below to point to the\nproper ORCA version. The ORCA version is specifed right after ",Object(i.b)("em",{parentName:"p"},"download")," in the\nURL path to the release. In the example above the release being used is v2.0.1."))),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-terraform"}),'# ORCA Module\nmodule "orca" {\n  source                         = "https://github.com/nasa/cumulus-orca/releases/download/v2.0.1/cumulus-orca-terraform.zip//modules/orca"\n  vpc_id                         = module.ngap.ngap_vpc.id\n  subnet_ids                     = module.ngap.ngap_subnets_ids\n  workflow_config                = module.cumulus.workflow_config\n  region                         = var.region\n  prefix                         = var.prefix\n  permissions_boundary_arn       = var.permissions_boundary_arn\n  buckets                        = var.buckets\n  platform                       = var.platform\n  database_name                  = var.database_name\n  database_port                  = var.database_port\n  postgres_user_pw               = var.postgres_user_pw\n  database_app_user              = var.database_app_user\n  database_app_user_pw           = var.database_app_user_pw\n  drop_database                  = var.drop_database\n  ddl_dir                        = var.ddl_dir\n  lambda_timeout                 = var.lambda_timeout\n  restore_complete_filter_prefix = var.restore_complete_filter_prefix\n  copy_retry_sleep_secs          = var.copy_retry_sleep_secs\n  default_tags                   = var.default_tags\n}\n')),Object(i.b)("h4",{id:"required-values-unique-to-the-orca-module"},"Required Values Unique to the ORCA Module"),Object(i.b)("p",null,"The following variables are unique to the ORCA module. More information about\nthese variables can be found in the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#orca-variables"}),"variables section"),"."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"platform"),Object(i.b)("li",{parentName:"ul"},"database_name"),Object(i.b)("li",{parentName:"ul"},"database_port"),Object(i.b)("li",{parentName:"ul"},"postgres_user_pw"),Object(i.b)("li",{parentName:"ul"},"database_app_user"),Object(i.b)("li",{parentName:"ul"},"database_app_user_pw"),Object(i.b)("li",{parentName:"ul"},"drop_database"),Object(i.b)("li",{parentName:"ul"},"ddl_dir"),Object(i.b)("li",{parentName:"ul"},"lambda_timeout"),Object(i.b)("li",{parentName:"ul"},"restore_complete_filter_prefix"),Object(i.b)("li",{parentName:"ul"},"copy_retry_sleep_secs"),Object(i.b)("li",{parentName:"ul"},"default_tags")),Object(i.b)("h4",{id:"required-values-retrieved-from-cumulus-variables"},"Required Values Retrieved from Cumulus Variables"),Object(i.b)("p",null,"The following variables are set as part of your Cumulus deployment. ORCA utilizes\nthese same variables for the build. More information about these variables can\nbe found in the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/nasa/cumulus/blob/master/tf-modules/cumulus/variables.tf"}),"Cumulus variable definitions"),"."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"region"),Object(i.b)("li",{parentName:"ul"},"prefix"),Object(i.b)("li",{parentName:"ul"},"permissions_boundary_arn"),Object(i.b)("li",{parentName:"ul"},"buckets")),Object(i.b)("h4",{id:"required-values-retrieved-from-other-modules"},"Required Values Retrieved from Other Modules"),Object(i.b)("p",null,"The following variables are set by retrieving output from other modules. This is\ndone so that the user does not have to lookup and set these variables after a\ndeployment. More information about these variables can be found in the\n",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/nasa/cumulus/blob/master/tf-modules/cumulus/variables.tf"}),"Cumulus variable definitions"),"."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"vpc_id"),Object(i.b)("li",{parentName:"ul"},"subnet_ids"),Object(i.b)("li",{parentName:"ul"},"workflow_config")),Object(i.b)("h3",{id:"modifying-cumulus-tfvariablestf"},"Modifying ",Object(i.b)("inlineCode",{parentName:"h3"},"cumulus-tf/variables.tf")),Object(i.b)("p",null,"At the end of the ",Object(i.b)("inlineCode",{parentName:"p"},"variables.tf")," file, add the following code."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-terraform"}),'## ORCA Variables Definitions\n\nvariable "platform" {\n  default = "AWS"\n  type = string\n  description = "Indicates if running locally (onprem) or in AWS (AWS)."\n}\n\nvariable "database_name" {\n  default = "orca"\n  type = string\n  description = "Name of the ORCA database that contains state information."\n}\n\nvariable "database_port" {\n  default = "5432"\n  type = string\n  description = "Port the database listens on."\n}\n\nvariable "postgres_user_pw" {\n  type = string\n  description = "postgres database user password."\n}\n\nvariable "database_app_user" {\n  default = "orca_user"\n  type = string\n  description = "ORCA application database user name."\n}\n\nvariable "database_app_user_pw" {\n  type = string\n  description = "ORCA application database user password."\n}\n\nvariable "drop_database" {\n  default = "False"\n  type = string\n  description = "Tells ORCA to drop the database on deployments."\n}\n\nvariable "ddl_dir" {\n  default = "ddl/"\n  type = string\n  description = "The location of the ddl dir that contains the sql to create the application database."\n}\n\nvariable "lambda_timeout" {\n  default = 300\n  type = number\n  description = "Lambda max time before a timeout error is thrown."\n}\n\nvariable "restore_complete_filter_prefix" {\n  default = ""\n  type = string\n  description = ""\n}\n\nvariable "copy_retry_sleep_secs" {\n  default = 0\n  type = number\n  description = "How many seconds to wait between retry calls to `copy_object`."\n}\n\nvariable "default_tags" {\n  type = object({ team = string, application = string })\n  default = {\n    team : "DR",\n    application : "disaster-recovery"\n  }\n}\n')),Object(i.b)("h3",{id:"modifying-cumulus-tfterraformtfvars"},"Modifying ",Object(i.b)("inlineCode",{parentName:"h3"},"cumulus-tf/terraform.tfvars")),Object(i.b)("p",null,"At the end of the ",Object(i.b)("inlineCode",{parentName:"p"},"terrafor.tfvars")," file, add the following code. Update the\nvariable values to the values for your particular environment."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"The example below shows the minimum variables to set for the module and accepting\ndefault values for the rest. The ORCA variables section provides additional\ninformation on variables that can be set for the ORCA application. In some cases\nadditional variable definitions may be needed."))),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-terraform"}),'## ORCA Configuration\ndatabase_app_user_pw = "my-orca-application-user-password"\npostgres_user_pw     = "my-super-secret-database-owner-password"\n')),Object(i.b)("p",null,"Below describes the type of value expected for each variable."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"database_app_user_pw")," - the password for the application user"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"postgres_user_pw")," - password for the postgres user")),Object(i.b)("p",null,"Additional variable definitions can be found in the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#orca-variables"}),"ORCA variables"),"\nsection of the document."),Object(i.b)("div",{className:"admonition admonition-important alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"The cumulus bucket variable will have to be modified to include the\ndisaster recovery bucket ",Object(i.b)("strong",{parentName:"p"},"glacier"),". An example can be seen below."),Object(i.b)("pre",{parentName:"div"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-terraform"}),'buckets = {\n  glacier = {\n    name = "orca-glacier"\n    type = "glacier"\n  },\n  internal = {\n    name = "orca-internal"\n    type = "internal"\n  },\n  private = {\n    name = "orca-private"\n    type = "private"\n  },\n  protected = {\n    name = "orca-protected"\n    type = "protected"\n  },\n  public = {\n    name = "orca-public"\n    type = "public"\n  }\n}\n')))),Object(i.b)("h2",{id:"configuring-orca-as-a-standalone-module-with-cumulus"},"Configuring ORCA as a Standalone Module with Cumulus"),Object(i.b)("p",null,"To deploy ORCA as a separate module, create an orca-tf folder in your Cumulus\ndeployment and perform the steps laid out below."),Object(i.b)("h3",{id:"configure-terraform"},"Configure Terraform"),Object(i.b)("p",null,"The state of the Terraform deployment is stored in S3. In the following\nexamples, it will be assumed that state is being stored in a bucket called\n",Object(i.b)("inlineCode",{parentName:"p"},"dr-tf-state"),". You can also use an existing bucket, if desired."),Object(i.b)("h4",{id:"create-the-state-bucket"},"Create the state bucket:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"aws s3api create-bucket \\\n  --bucket dr-tf-state \\\n  --create-bucket-configuration LocationConstraint=us-west-2\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"The ",Object(i.b)("inlineCode",{parentName:"p"},"--create-bucket-configuration")," line is only necessary if you are creating your bucket outside of ",Object(i.b)("inlineCode",{parentName:"p"},"us-east-1"),"."))),Object(i.b)("p",null,"In order to help prevent loss of state information, it is recommended that\nversioning be enabled on the state bucket:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"$ aws s3api put-bucket-versioning \\\n    --bucket dr-tf-state \\\n    --versioning-configuration Status=Enabled\n")),Object(i.b)("h4",{id:"create-the-locks-table"},"Create the locks table:"),Object(i.b)("p",null,"Terraform uses a lock stored in DynamoDB in order to prevent multiple\nsimultaneous updates. In the following examples, that table will be called\n",Object(i.b)("inlineCode",{parentName:"p"},"dr-tf-locks"),"."),Object(i.b)("div",{className:"admonition admonition-important alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"The ",Object(i.b)("inlineCode",{parentName:"p"},"--billing-mode")," option was recently added to the AWS CLI. You\nmay need to upgrade your version of the AWS CLI if you get an error about\nprovisioned throughput when creating the table."))),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"$ aws dynamodb create-table \\\n    --table-name dr-tf-locks \\\n    --attribute-definitions AttributeName=LockID,AttributeType=S \\\n    --key-schema AttributeName=LockID,KeyType=HASH \\\n    --billing-mode PAY_PER_REQUEST\n")),Object(i.b)("h4",{id:"configure-and-deploy-the-main-root-module"},"Configure and deploy the ",Object(i.b)("inlineCode",{parentName:"h4"},"main")," root module"),Object(i.b)("p",null,"Create a ",Object(i.b)("inlineCode",{parentName:"p"},"terraform.tf")," file, substituting the appropriate values for ",Object(i.b)("inlineCode",{parentName:"p"},"bucket"),"\nand ",Object(i.b)("inlineCode",{parentName:"p"},"dynamodb_table")," in the ",Object(i.b)("inlineCode",{parentName:"p"},"orca-tf")," directory. This tells Terraform where to\nstore its remote state. See the example below for the information to add to the\nfile."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'terraform {\n  backend "s3" {\n    region         = "us-west-2"\n    bucket         = "dr-tf-state"\n    key            = "terraform.tfstate"\n    dynamodb_table = "dr-tf-locks"\n  }\n}\n')),Object(i.b)("h3",{id:"create-the-terraformtfvars-file"},"Create the ",Object(i.b)("inlineCode",{parentName:"h3"},"terraform.tfvars")," file."),Object(i.b)("p",null,"Create a ",Object(i.b)("inlineCode",{parentName:"p"},"terraform.tfvars")," file in the ",Object(i.b)("inlineCode",{parentName:"p"},"orca-tf")," directory. This is where you\nwill place input variables to Terraform. A complete list of variables is in the\n",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#orca-variables"}),"ORCA variables")," section. In addition, the following Cumulus\nvariables must be set."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"buckets"),Object(i.b)("li",{parentName:"ul"},"ecs_cluster_instance_subnet_ids"),Object(i.b)("li",{parentName:"ul"},"permissions_boundary_arn"),Object(i.b)("li",{parentName:"ul"},"prefix"),Object(i.b)("li",{parentName:"ul"},"region"),Object(i.b)("li",{parentName:"ul"},"vpc_id"),Object(i.b)("li",{parentName:"ul"},"workflow_config")),Object(i.b)("h3",{id:"create-the-variablestf-file"},"Create the ",Object(i.b)("inlineCode",{parentName:"h3"},"variables.tf")," file."),Object(i.b)("p",null,"Create a ",Object(i.b)("inlineCode",{parentName:"p"},"variables.tf")," file in the ",Object(i.b)("inlineCode",{parentName:"p"},"orca-tf")," directory. Copy the code below and\nadd to the file."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-terraform"}),'## Required Cumulus Variables Definitions\nvariable "buckets" {\n  type    = map(object({ name = string, type = string }))\n  default = {}\n}\n\nvariable "permissions_boundary_arn" {\n  type    = string\n  default = null\n}\n\nvariable "prefix" {\n  type = string\n}\n\nvariable "region" {\n  type    = string\n  default = "us-west-2"\n}\n\nvariable "ecs_cluster_instance_subnet_ids" {\n  type    = list(string)\n  default = []\n}\n\nvariable "vpc_id" {\n  type = string\n}\n\n\n## ORCA Variables Definitions\n\nvariable "platform" {\n  default = "AWS"\n  type = string\n  description = "Indicates if running locally (onprem) or in AWS (AWS)."\n}\n\nvariable "database_name" {\n  default = "orca"\n  type = string\n  description = "Name of the ORCA database that contains state information."\n}\n\nvariable "database_port" {\n  default = "5432"\n  type = string\n  description = "Port the database listens on."\n}\n\nvariable "postgres_user_pw" {\n  type = string\n  description = "postgres database user password."\n}\n\nvariable "database_app_user" {\n  default = "orca_user"\n  type = string\n  description = "ORCA application database user name."\n}\n\nvariable "database_app_user_pw" {\n  type = string\n  description = "ORCA application database user password."\n}\n\nvariable "drop_database" {\n  default = "False"\n  type = string\n  description = "Tells ORCA to drop the database on deployments."\n}\n\nvariable "ddl_dir" {\n  default = "ddl/"\n  type = string\n  description = "The location of the ddl dir that contains the sql to create the application database."\n}\n\nvariable "lambda_timeout" {\n  default = 300\n  type = number\n  description = "Lambda max time before a timeout error is thrown."\n}\n\nvariable "restore_complete_filter_prefix" {\n  default = ""\n  type = string\n  description = ""\n}\n\nvariable "copy_retry_sleep_secs" {\n  default = 0\n  type = number\n  description = "How many seconds to wait between retry calls to `copy_object`."\n}\n\nvariable "default_tags" {\n  type = object({ team = string, application = string })\n  default = {\n    team : "DR",\n    application : "disaster-recovery"\n  }\n}\n')),Object(i.b)("h3",{id:"modifying-cumulus-tfterraformtfvars-1"},"Modifying ",Object(i.b)("inlineCode",{parentName:"h3"},"cumulus-tf/terraform.tfvars")),Object(i.b)("p",null,"At the end of the ",Object(i.b)("inlineCode",{parentName:"p"},"terrafor.tfvars")," file, add the following code. Update the\nvariable values to the values for your particular environment."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"The example below shows the minimum variables to set for the module and accepting\ndefault values for the rest. The ORCA variables section provides additional"),Object(i.b)("h3",Object(n.a)({parentName:"div"},{id:"create-the-maintf-file"}),"Create the ",Object(i.b)("inlineCode",{parentName:"h3"},"main.tf")," file."),Object(i.b)("p",{parentName:"div"},"Create the ",Object(i.b)("inlineCode",{parentName:"p"},"main.tf")," file in the ",Object(i.b)("inlineCode",{parentName:"p"},"orca-tf")," director. Copy the code block below\ninto the main.tf file for ORCA."))),Object(i.b)("p",null,"Only change the value of ",Object(i.b)("inlineCode",{parentName:"p"},"source")," in the code example below to point to the\nproper ORCA version. The ORCA version is specifed right after ",Object(i.b)("em",{parentName:"p"},"download")," in the\nURL path to the release. In the example above the release being used is v2.0.1."),Object(i.b)("p",null,":::"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-terraform"}),'provider "aws" {\n  version = "~> 2.13"\n  region  = var.region\n  profile = var.profile\n}\n\n# ORCA Module\nmodule "orca" {\n  source                         = "https://github.com/nasa/cumulus-orca/releases/download/v2.0.1/cumulus-orca-terraform.zip//modules/orca"\n  vpc_id                         = var.vpc_id\n  subnet_ids                     = var.ecs_cluster_instance_subnet_ids\n  workflow_config                = var.workflow_config\n  region                         = var.region\n  prefix                         = var.prefix\n  permissions_boundary_arn       = var.permissions_boundary_arn\n  buckets                        = var.buckets\n  platform                       = var.platform\n  database_name                  = var.database_name\n  database_port                  = var.database_port\n  postgres_user_pw               = var.postgres_user_pw\n  database_app_user              = var.database_app_user\n  database_app_user_pw           = var.database_app_user_pw\n  drop_database                  = var.drop_database\n  ddl_dir                        = var.ddl_dir\n  lambda_timeout                 = var.lambda_timeout\n  restore_complete_filter_prefix = var.restore_complete_filter_prefix\n  copy_retry_sleep_secs          = var.copy_retry_sleep_secs\n  default_tags                   = var.default_tags\n}\n')),Object(i.b)("h2",{id:"define-the-orca-wokflows"},"Define the ORCA Wokflows"),Object(i.b)("h3",{id:"add-the-copy-to-glacier-step-to-an-ingest-workflow"},"Add the Copy To Glacier Step to an Ingest Workflow"),Object(i.b)("p",null,"Navigate to ",Object(i.b)("inlineCode",{parentName:"p"},"cumulus-tf/ingest_granule_workflow.tf")," then add the following step\nanywhere after the MoveGranuleStep step being sure to change the MoveGranuleStep's\n",Object(i.b)("inlineCode",{parentName:"p"},'"Next"'),' parameter equal to "CopyToGlacier".'),Object(i.b)("div",{className:"admonition admonition-important alert alert--info"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Adjust the ",Object(i.b)("inlineCode",{parentName:"p"},'"Next"')," step in the example below to point to the proper step in\nthe ingest workflow."))),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{}),'"CopyToGlacier":{\n   "Parameters":{\n      "cma":{\n         "event.$":"$",\n         "task_config":{\n            "buckets":"{$.meta.buckets}",\n            "provider": "{$.meta.provider}",\n            "collection":"{$.meta.collection}",\n            "granules": "{$.meta.processed_granules}",\n            "files_config": "{$.meta.collection.files}"\n            }\n         }\n      }\n   },\n   "Type":"Task",\n   "Resource":"${module.orca.copy_to_glacier_lambda_arn}",\n   "Catch":[\n      {\n         "ErrorEquals":[\n            "States.ALL"\n         ],\n         "ResultPath":"$.exception",\n         "Next":"WorkflowFailed"\n      }\n   ],\n   "Retry": [\n      {\n        "ErrorEquals": [\n           "States.ALL"\n        ],\n        "IntervalSeconds": 2,\n        "MaxAttempts": 3,\n        "BackoffRate": 2\n      }\n   ],\n   "Next":"WorkflowSucceeded"\n},\n')),Object(i.b)("h3",{id:"modify-the-recovery-workflow-optional"},"Modify the Recovery Workflow (",Object(i.b)("em",{parentName:"h3"},"OPTIONAL"),")"),Object(i.b)("p",null,"Copy the workflow from ",Object(i.b)("inlineCode",{parentName:"p"},"workflows/workflows.yml.dr")," into your Cumulus workflow.\nModify as needed."),Object(i.b)("h2",{id:"orca-variables"},"ORCA Variables"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Required:")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"ngap_subnets")," - NGAP Subnets (array)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"vpc_id")," - ID of VPC to place resources in - recommended that this be a private VPC (or at least one with restricted access)."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"glacier_bucket")," - Bucket with Glacier policy"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"public_bucket")," - Bucket with public permissions (Cumulus public bucket)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"private_bucket")," - Bucket with private permissions (Cumulus private bucket)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"internal_bucket")," - Analogous to the Cumulus internal bucket"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"protected_bucket")," - Analogous to the Cumulus protected bucket"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"permissions_boundary_arn")," - Permission Boundary Arn (Policy) for NGAP compliance"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"postgres_user_pw")," - password for the postgres user"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"database_name")," - orca"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"database_app_user")," - orca_user"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"database_app_user_pw")," - the password for the application user")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Optional:")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"prefix")," - Prefix that will be pre-pended to resource names created by terraform.\nDefaults to ",Object(i.b)("inlineCode",{parentName:"li"},"dr"),"."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"profile")," - AWS CLI Profile (configured via ",Object(i.b)("inlineCode",{parentName:"li"},"aws configure"),") to use.\nDefaults to ",Object(i.b)("inlineCode",{parentName:"li"},"default"),"."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"region")," - Your AWS region.\nDefaults to ",Object(i.b)("inlineCode",{parentName:"li"},"us-west-2"),"."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"restore_expire_days")," - How many days to restore a file for.\nDefaults to 5."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"restore_request_retries")," - How many times to retry a restore request to Glacier.\nDefaults to 3."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"restore_retry_sleep_secs")," - How many seconds to wait between retry calls to ",Object(i.b)("inlineCode",{parentName:"li"},"restore_object"),".\nDefaults to 3."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"restore_retrieval_type")," -  the Tier for the restore request. Valid values are 'Standard'|'Bulk'|'Expedited'.\nDefaults to ",Object(i.b)("inlineCode",{parentName:"li"},"Standard"),". Understand the costs associated with the tiers before modifying."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"copy_retries")," - How many times to retry a copy request from the restore location to the archive location.\nDefaults to 3."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"copy_retry_sleep_secs")," - How many seconds to wait between retry calls to ",Object(i.b)("inlineCode",{parentName:"li"},"copy_object"),".\nDefaults to 0."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"ddl_dir")," - the location of the ddl dir that contains the sql to create the application database.\nDefaults to 'ddl/'."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"drop_database")," - Whether to drop the database if it exists (True), or keep it (False).\nDefaults to False."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"database_port")," - the port for the postgres database.\nDefaults to '5432'."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"platform")," - indicates if running locally (onprem) or in AWS (AWS).\nDefaults to 'AWS'.")),Object(i.b)("h2",{id:"deploy-orca-with-terraform"},"Deploy ORCA with Terraform"),Object(i.b)("p",null,"In the proper module directory, initialize and apply changes using the commands\nbelow."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Run ",Object(i.b)("inlineCode",{parentName:"li"},"terraform init"),"."),Object(i.b)("li",{parentName:"ol"},"Run ",Object(i.b)("inlineCode",{parentName:"li"},"terraform plan")," #optional, but allows you to preview the deploy."),Object(i.b)("li",{parentName:"ol"},"Run ",Object(i.b)("inlineCode",{parentName:"li"},"terraform apply"),".")),Object(i.b)("p",null,"This commands above will create and deploy ORCA. To delete the created objects,\nrun ",Object(i.b)("inlineCode",{parentName:"p"},"terraform destroy"),"."),Object(i.b)("h2",{id:"collection-configuration"},"Collection Configuration"),Object(i.b)("p",null,"To configure a collection to enable ORCA, add the line\n",Object(i.b)("inlineCode",{parentName:"p"},'"granuleRecoveryWorkflow": "DrRecoveryWorkflow"')," to the collection configuration\nas seen below. Optionally, you can exclude files by adding values to an\n",Object(i.b)("inlineCode",{parentName:"p"},'"exclue_file_type"')," variable. For more information, see the documentation on the\n",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/nasa/cumulus-orca/tree/master/tasks/copy_to_glacier"}),Object(i.b)("inlineCode",{parentName:"a"},"copy_to_glacier")," task"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "queriedAt": "2019-11-07T22:49:46.842Z",\n  "name": "L0A_HR_RAW",\n  "version": "1",\n  "sampleFileName": "L0A_HR_RAW_product_0001-of-0420.h5",\n  "dataType": "L0A_HR_RAW",\n  "granuleIdExtraction": "^(.*)((\\\\.cmr\\\\.json)|(\\\\.iso\\\\.xml)|(\\\\.tar\\\\.gz)|(\\\\.h5)|(\\\\.h5\\\\.mp))$",\n  "reportToEms": true,\n  "granuleId": "^.*$",\n  "provider_path": "L0A_HR_RAW/",\n  "meta": {\n    "granuleRecoveryWorkflow": "DrRecoveryWorkflow",\n    "exclue_file_type": [".cmr", ".xml", ".met"]\n  },\n  ...\n}\n')),Object(i.b)("h2",{id:"enable-recover-granule-button"},"Enable ",Object(i.b)("inlineCode",{parentName:"h2"},"Recover Granule")," Button"),Object(i.b)("p",null,"To enable the ",Object(i.b)("inlineCode",{parentName:"p"},"Recover Granule")," button on the Cumulus Dashboard (available at github.com/nasa/cumulus-dashboard),\nset the environment variable ",Object(i.b)("inlineCode",{parentName:"p"},"ENABLE_RECOVERY=true"),"."),Object(i.b)("p",null,"Here is an sample command to run the Cumulus Dashboard locally."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"APIROOT=https://uttm5y1jcj.execute-api.us-west-2.amazonaws.com:8000/dev ENABLE_RECOVERY=true npm run serve\n")))}b.isMDXComponent=!0}}]);