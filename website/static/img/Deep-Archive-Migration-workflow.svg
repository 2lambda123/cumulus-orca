<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="400px" preserveAspectRatio="none" style="width:1351px;height:400px;background:#FFFFFF;" version="1.1" viewBox="0 0 1351 400" width="1351px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="81.2969" y2="319.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="241.5" x2="241.5" y1="81.2969" y2="319.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="329.5" x2="329.5" y1="81.2969" y2="319.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="662" x2="662" y1="81.2969" y2="319.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="757" x2="757" y1="81.2969" y2="319.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1052.5" x2="1052.5" y1="81.2969" y2="319.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1333" x2="1333" y1="81.2969" y2="319.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="5" y="77.9951">end user</text><ellipse cx="38.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.5,21.5 L38.5,48.5 M25.5,29.5 L51.5,29.5 M38.5,48.5 L25.5,63.5 M38.5,48.5 L51.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="5" y="331.2217">end user</text><ellipse cx="38.5" cy="343.0234" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.5,351.0234 L38.5,378.0234 M25.5,359.0234 L51.5,359.0234 M38.5,378.0234 L25.5,393.0234 M38.5,378.0234 L51.5,393.0234 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="176.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="183.5" y="69.9951">cumulus console</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="176.5" y="318.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="183.5" y="338.2217">cumulus console</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="27" x="316.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="323.5" y="69.9951">l1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="27" x="316.5" y="318.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="323.5" y="338.2217">l1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="609" y="77.9951">ORCA Catalog</text><path d="M644,29 C644,19 662,19 662,19 C662,19 680,19 680,29 L680,55 C680,65 662,65 662,65 C662,65 644,65 644,55 L644,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M644,29 C644,39 662,39 662,39 C662,39 680,39 680,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="609" y="331.2217">ORCA Catalog</text><path d="M644,344.5234 C644,334.5234 662,334.5234 662,334.5234 C662,334.5234 680,334.5234 680,344.5234 L680,370.5234 C680,380.5234 662,380.5234 662,380.5234 C662,380.5234 644,380.5234 644,370.5234 L644,344.5234 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M644,344.5234 C644,354.5234 662,354.5234 662,354.5234 C662,354.5234 680,354.5234 680,344.5234 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="725" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="732" y="69.9951">bucket</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="725" y="318.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="732" y="338.2217">bucket</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="26" x="1039.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1046.5" y="69.9951">l2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="26" x="1039.5" y="318.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1046.5" y="338.2217">l2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="23" x="1322" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="9" x="1329" y="69.9951">e</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="23" x="1322" y="318.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="9" x="1329" y="338.2217">e</text><polygon fill="#181818" points="229.5,108.4297,239.5,112.4297,229.5,116.4297,233.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="235.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="45.5" y="107.3638">End user initiating migration</text><polygon fill="#181818" points="318,122.4297,328,126.4297,318,130.4297,322,126.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="241.5" x2="324" y1="126.4297" y2="126.4297"/><polygon fill="#181818" points="650,151.5625,660,155.5625,650,159.5625,654,155.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="330" x2="656" y1="155.5625" y2="155.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="337" y="150.4966">queries orca catalog and performs bulk retrieval</text><polygon fill="#181818" points="673,180.6953,663,184.6953,673,188.6953,669,184.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="667" x2="1051.5" y1="184.6953" y2="184.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294" x="679" y="179.6294">updates catalog status table for storage class</text><polygon fill="#181818" points="49.5,209.8281,39.5,213.8281,49.5,217.8281,45.5,213.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="1051.5" y1="213.8281" y2="213.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="55.5" y="208.7622">provides progress/updates of copying to end user</text><polygon fill="#181818" points="1063.5,238.9609,1053.5,242.9609,1063.5,246.9609,1059.5,242.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1057.5" x2="1332.5" y1="242.9609" y2="242.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="1069.5" y="237.895">S3 S3 event notification triggers lambda</text><polygon fill="#181818" points="1321.5,268.0938,1331.5,272.0938,1321.5,276.0938,1325.5,272.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="757.5" x2="1327.5" y1="272.0938" y2="272.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="764.5" y="267.0278">Looks for object restore events</text><polygon fill="#181818" points="768.5,297.2266,758.5,301.2266,768.5,305.2266,764.5,301.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="762.5" x2="1051.5" y1="301.2266" y2="301.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="774.5" y="296.1606">copies the restored object to deep archive</text><!--MD5=[05416171110284a6157a75248ccf0f0e]
@startuml
actor "end user"
"end user" -> "cumulus console": End user initiating migration
"cumulus console" -> "l1"
database "ORCA Catalog"

"l1"-> "ORCA Catalog":   queries orca catalog and performs bulk retrieval

participant "bucket"



"l2"-> "ORCA Catalog":   updates catalog status table for storage class


"l2"-> "end user":   provides progress/updates of copying to end user

participant "e"
"e" -> "l2": S3 S3 event notification triggers lambda

"bucket"-> "e": Looks for object restore events
"l2"-> "bucket":    copies the restored object to deep archive
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>