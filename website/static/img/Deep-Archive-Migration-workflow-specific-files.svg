<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="903px" preserveAspectRatio="none" style="width:2385px;height:903px;background:#FFFFFF;" version="1.1" viewBox="0 0 2385 903" width="2385px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" id="_title" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="365" x="1009.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="355" x="1014.25" y="27.9951">Deep Archive Collection Migration Workflow</text><rect fill="#FFFFFF" height="669.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="162" y="128.5938"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="674" y="149.7266"/><rect fill="#FFFFFF" height="174.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="851" y="207.9922"/><rect fill="#FFFFFF" height="312.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="1222" y="237.125"/><rect fill="#FFFFFF" height="195.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340" y="324.5234"/><rect fill="#FFFFFF" height="351.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="1776" y="462.1875"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2120" y="602.8516"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2286.5" y="733.5156"/><rect height="140.7969" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2194.5" x="9" y="564.5859"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="167" x2="167" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="679" x2="679" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="855.5" x2="855.5" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1227" x2="1227" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1345" x2="1345" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1780.5" x2="1780.5" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1920.5" x2="1920.5" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2124.5" x2="2124.5" y1="118.5938" y2="822.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2291.5" x2="2291.5" y1="118.5938" y2="822.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="132" y="115.292">operator</text><ellipse cx="167" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M167,58.7969 L167,85.7969 M154,66.7969 L180,66.7969 M167,85.7969 L154,100.7969 M167,85.7969 L180,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="132" y="834.7764">operator</text><ellipse cx="167" cy="846.5781" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M167,854.5781 L167,881.5781 M154,862.5781 L180,862.5781 M167,881.5781 L154,896.5781 M167,881.5781 L180,896.5781 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="612" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="619" y="107.292">Cumulus Console</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="612" y="821.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="619" y="841.7764">Cumulus Console</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="779.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="786.5" y="107.292">Migration Recovery</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="779.5" y="821.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="786.5" y="841.7764">Migration Recovery</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1174" y="115.292">ORCA Catalog</text><path d="M1209,66.2969 C1209,56.2969 1227,56.2969 1227,56.2969 C1227,56.2969 1245,56.2969 1245,66.2969 L1245,92.2969 C1245,102.2969 1227,102.2969 1227,102.2969 C1227,102.2969 1209,102.2969 1209,92.2969 L1209,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1209,66.2969 C1209,76.2969 1227,76.2969 1227,76.2969 C1227,76.2969 1245,76.2969 1245,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1174" y="834.7764">ORCA Catalog</text><path d="M1209,848.0781 C1209,838.0781 1227,838.0781 1227,838.0781 C1227,838.0781 1245,838.0781 1245,848.0781 L1245,874.0781 C1245,884.0781 1227,884.0781 1227,884.0781 C1227,884.0781 1209,884.0781 1209,874.0781 L1209,848.0781 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1209,848.0781 C1209,858.0781 1227,858.0781 1227,858.0781 C1227,858.0781 1245,858.0781 1245,848.0781 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="1290" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1297" y="107.292">ORCA Bucket</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="1290" y="821.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1297" y="841.7764">ORCA Bucket</text><path d="M1717.5,92.2969 L1844.5,92.2969 C1849.5,92.2969 1849.5,105.4453 1849.5,105.4453 C1849.5,105.4453 1849.5,118.5938 1844.5,118.5938 L1717.5,118.5938 C1712.5,118.5938 1712.5,105.4453 1712.5,105.4453 C1712.5,105.4453 1712.5,92.2969 1717.5,92.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1844.5,92.2969 C1839.5,92.2969 1839.5,105.4453 1839.5,105.4453 C1839.5,118.5938 1844.5,118.5938 1844.5,118.5938 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1717.5" y="110.292">Migration Queue</text><path d="M1717.5,821.7813 L1844.5,821.7813 C1849.5,821.7813 1849.5,834.9297 1849.5,834.9297 C1849.5,834.9297 1849.5,848.0781 1844.5,848.0781 L1717.5,848.0781 C1712.5,848.0781 1712.5,834.9297 1712.5,834.9297 C1712.5,834.9297 1712.5,821.7813 1717.5,821.7813 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1844.5,821.7813 C1839.5,821.7813 1839.5,834.9297 1839.5,834.9297 C1839.5,848.0781 1844.5,848.0781 1844.5,848.0781 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1717.5" y="839.7764">Migration Queue</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="1859.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1866.5" y="107.292">Migration Copy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="1859.5" y="821.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1866.5" y="841.7764">Migration Copy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="2056.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="2063.5" y="107.292">Migration Report</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="2056.5" y="821.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="2063.5" y="841.7764">Migration Report</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="2203.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="2210.5" y="107.292">Internal Reconciliation</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="2203.5" y="821.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="2210.5" y="841.7764">Internal Reconciliation</text><rect fill="#FFFFFF" height="669.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="162" y="128.5938"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="674" y="149.7266"/><rect fill="#FFFFFF" height="174.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="851" y="207.9922"/><rect fill="#FFFFFF" height="312.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="1222" y="237.125"/><rect fill="#FFFFFF" height="195.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="1340" y="324.5234"/><rect fill="#FFFFFF" height="351.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="1776" y="462.1875"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2120" y="602.8516"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2286.5" y="733.5156"/><polygon fill="#008000" points="662,145.7266,672,149.7266,662,153.7266,666,149.7266" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="668" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="179" y="144.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="192" y="144.6606">Configure ORCA for Deep Archive in the collection</text><polygon fill="#008000" points="662,174.8594,672,178.8594,662,182.8594,666,178.8594" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="668" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="179" y="173.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="192" y="173.7935">End user initiating migration</text><polygon fill="#008000" points="839,203.9922,849,207.9922,839,211.9922,843,207.9922" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="679" x2="845" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="686" y="202.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="698" y="202.9263">Calls with collectionId</text><polygon fill="#008000" points="1210,233.125,1220,237.125,1210,241.125,1214,237.125" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="861" x2="1216" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="868" y="232.0591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="881" y="232.0591">Queries for all the files related to collectionId</text><polygon fill="#FF0000" points="872,262.2578,862,266.2578,872,270.2578,868,266.2578" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="866" x2="1221" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="878" y="261.1919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="891" y="261.1919">Returns all the relevant files</text><polygon fill="#008000" points="1210,291.3906,1220,295.3906,1210,299.3906,1214,295.3906" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="861" x2="1216" y1="295.3906" y2="295.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="868" y="290.3247">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="324" x="881" y="290.3247">Creates migration job records with pending status.</text><polygon fill="#008000" points="1328,320.5234,1338,324.5234,1328,328.5234,1332,324.5234" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="861" x2="1334" y1="324.5234" y2="324.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="868" y="319.4575">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="881" y="319.4575">Performs bulk retrieval for the files</text><polygon fill="#FF0000" points="872,349.6563,862,353.6563,872,357.6563,868,353.6563" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="866" x2="1339" y1="353.6563" y2="353.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="878" y="348.5903">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="891" y="348.5903">Retrieval status sent</text><polygon fill="#008000" points="1210,378.7891,1220,382.7891,1210,386.7891,1214,382.7891" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="856" x2="1216" y1="382.7891" y2="382.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="863" y="377.7231">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="876" y="377.7231">Updates the migration job status</text><path d="M1276,395.7891 L1276,435.7891 L1413,435.7891 L1413,405.7891 L1403,395.7891 L1276,395.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1403,395.7891 L1403,405.7891 L1413,405.7891 L1403,395.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="1282" y="412.856">Bulk recovery</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1282" y="427.9888">takes 12-24 hours</text><polygon fill="#008000" points="1764,458.1875,1774,462.1875,1764,466.1875,1768,462.1875" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="1350" x2="1770" y1="462.1875" y2="462.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1357" y="457.1216">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384" x="1380" y="457.1216">Notify message that files have been restored sent to queue</text><polygon fill="#008000" points="1797,487.3203,1787,491.3203,1797,495.3203,1793,491.3203" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="1791" x2="2124" y1="491.3203" y2="491.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1803" y="486.2544">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="1825" y="486.2544">Read messages that files have been restored</text><polygon fill="#FF0000" points="1356,516.4531,1346,520.4531,1356,524.4531,1352,520.4531" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="1350" x2="1920" y1="520.4531" y2="520.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1362" y="515.3872">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1384" y="515.3872">Copies files to Deep Archive storage</text><polygon fill="#FF0000" points="1238,545.5859,1228,549.5859,1238,553.5859,1234,549.5859" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="1232" x2="1920" y1="549.5859" y2="549.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1244" y="544.52">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="421" x="1265" y="544.52">Update the file storage type and migration status in the database</text><path d="M9,564.5859 L87,564.5859 L87,571.7188 L77,581.7188 L9,581.7188 L9,564.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="140.7969" style="stroke:#000000;stroke-width:1.5;" width="2194.5" x="9" y="564.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="24" y="577.6528">loop</text><polygon fill="#008000" points="2108,598.8516,2118,602.8516,2108,606.8516,2112,602.8516" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="2114" y1="602.8516" y2="602.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="179" y="597.7856">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="201" y="597.7856">Requests migration job status by passing jobId</text><polygon fill="#FF0000" points="183,627.9844,173,631.9844,183,635.9844,179,631.9844" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="177" x2="2124" y1="631.9844" y2="631.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="189" y="626.9185">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="211" y="626.9185">Returns migration job information</text><path d="M19,644.9844 L19,699.9844 L314,699.9844 L314,654.9844 L304,644.9844 L19,644.9844 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M304,644.9844 L304,654.9844 L314,654.9844 L304,644.9844 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="25" y="662.0513"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="25" y="677.1841"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="25" y="692.3169">Runs reports until job is in completed state</text><polygon fill="#008000" points="2274.5,729.5156,2284.5,733.5156,2274.5,737.5156,2278.5,733.5156" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;" x1="172" x2="2280.5" y1="733.5156" y2="733.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="179" y="728.4497">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311" x="201" y="728.4497">Requests internal reconciliation mismatch report</text><polygon fill="#FF0000" points="183,758.6484,173,762.6484,183,766.6484,179,762.6484" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="177" x2="2290.5" y1="762.6484" y2="762.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="189" y="757.5825">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="211" y="757.5825">Returns mismatch data based on storage type</text><line style="stroke:#FF0000;stroke-width:1.0;" x1="172" x2="214" y1="796.7813" y2="796.7813"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="214" x2="214" y1="796.7813" y2="809.7813"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="167" x2="214" y1="809.7813" y2="809.7813"/><polygon fill="#FF0000" points="177,805.7813,167,809.7813,177,813.7813,173,809.7813" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="179" y="791.7153">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="466" x="201" y="791.7153">Analyzes mismatch reports for storage discrepencies and resolves them</text><!--MD5=[03635797022e51da4758ccce1ee1d9b4]
@startuml
title "Deep Archive Collection Migration Workflow"

actor operator
participant "Cumulus Console" as cc
participant "Migration Recovery" as ms
database "ORCA Catalog" as oc
participant "ORCA Bucket" as ob
queue "Migration Queue" as mq
participant "Migration Copy" as mc
participant "Migration Report" as mr
participant "Internal Reconciliation" as ir
autonumber

activate operator

operator -[#green]> cc: Configure ORCA for Deep Archive in the collection
activate cc
operator -[#green]> cc: End user initiating migration
cc-[#green]> ms: Calls with collectionId
deactivate cc

activate ms


ms-[#green]> oc: Queries for all the files related to collectionId
activate oc
oc-[#red]>ms: Returns all the relevant files

ms -[#green]> oc: Creates migration job records with pending status.



ms-[#green]> ob: Performs bulk retrieval for the files
activate ob
ob -[#red]> ms: Retrieval status sent

ms -[#green]> oc: Updates the migration job status

deactivate ms
note over ob
Bulk recovery 
takes 12-24 hours
end note

ob-[#green]> mq: Notify message that files have been restored sent to queue

activate mq
mr-[#green]> mq: Read messages that files have been restored

mc -[#red]> ob: Copies files to Deep Archive storage

deactivate ob
mc-[#red]> oc: Update the file storage type and migration status in the database
deactivate oc
loop

operator -[#green]> mr: Requests migration job status by passing jobId

activate mr

mr -[#red]> operator: Returns migration job information
deactivate mr
note over operator


Runs reports until job is in completed state
end note
end

operator-[#green]> ir: Requests internal reconciliation mismatch report
activate ir
ir-[#red]> operator: Returns mismatch data based on storage type
deactivate ir
operator -[#red]> operator: Analyzes mismatch reports for storage discrepencies and resolves them


'
deactivate operator
@enduml

@startuml
title "Deep Archive Collection Migration Workflow"

actor operator
participant "Cumulus Console" as cc
participant "Migration Recovery" as ms
database "ORCA Catalog" as oc
participant "ORCA Bucket" as ob
queue "Migration Queue" as mq
participant "Migration Copy" as mc
participant "Migration Report" as mr
participant "Internal Reconciliation" as ir
autonumber

activate operator

operator -[#green]> cc: Configure ORCA for Deep Archive in the collection
activate cc
operator -[#green]> cc: End user initiating migration
cc-[#green]> ms: Calls with collectionId
deactivate cc

activate ms


ms-[#green]> oc: Queries for all the files related to collectionId
activate oc
oc-[#red]>ms: Returns all the relevant files

ms -[#green]> oc: Creates migration job records with pending status.



ms-[#green]> ob: Performs bulk retrieval for the files
activate ob
ob -[#red]> ms: Retrieval status sent

ms -[#green]> oc: Updates the migration job status

deactivate ms
note over ob
Bulk recovery 
takes 12-24 hours
end note

ob-[#green]> mq: Notify message that files have been restored sent to queue

activate mq
mr-[#green]> mq: Read messages that files have been restored

mc -[#red]> ob: Copies files to Deep Archive storage

deactivate ob
mc-[#red]> oc: Update the file storage type and migration status in the database
deactivate oc
loop

operator -[#green]> mr: Requests migration job status by passing jobId

activate mr

mr -[#red]> operator: Returns migration job information
deactivate mr
note over operator


Runs reports until job is in completed state
end note
end

operator-[#green]> ir: Requests internal reconciliation mismatch report
activate ir
ir-[#red]> operator: Returns mismatch data based on storage type
deactivate ir
operator -[#red]> operator: Analyzes mismatch reports for storage discrepencies and resolves them


deactivate operator
@enduml

PlantUML version 1.2022.7beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>