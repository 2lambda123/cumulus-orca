<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/cumulus-orca/blog/rss.xml" title="Operational Recovery Cloud Archive (ORCA) Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cumulus-orca/blog/atom.xml" title="Operational Recovery Cloud Archive (ORCA) Blog Atom Feed"><title data-react-helmet="true">Deploying ORCA with Cumulus | Operational Recovery Cloud Archive (ORCA)</title><meta data-react-helmet="true" property="og:url" content="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/deployment-guide/deployment-with-cumulus"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Deploying ORCA with Cumulus | Operational Recovery Cloud Archive (ORCA)"><meta data-react-helmet="true" name="description" content="Provides developer information for ORCA code deployment with Cumulus."><meta data-react-helmet="true" property="og:description" content="Provides developer information for ORCA code deployment with Cumulus."><link data-react-helmet="true" rel="shortcut icon" href="/cumulus-orca/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/deployment-guide/deployment-with-cumulus"><link data-react-helmet="true" rel="alternate" href="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/deployment-guide/deployment-with-cumulus" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/deployment-guide/deployment-with-cumulus" hreflang="x-default"><link rel="stylesheet" href="/cumulus-orca/assets/css/styles.a572aadc.css">
<link rel="preload" href="/cumulus-orca/assets/js/runtime~main.766c6591.js" as="script">
<link rel="preload" href="/cumulus-orca/assets/js/main.080ad3c4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cumulus-orca/"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Operational Recovery Cloud Archive (ORCA)</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Guide</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/operator/operator-intro">Operator Guide</a><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cumulus-orca/"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Operational Recovery Cloud Archive (ORCA)</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a></li><li class="menu__list-item"><a class="menu__link" href="/cumulus-orca/docs/operator/operator-intro">Operator Guide</a></li><li class="menu__list-item"><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Quick Start Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development Guide</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Developing Code</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/contrib-code-intro">Code Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/setup-dev-env">Setting Up a Dev Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/best-practices">Best Practices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/versioning-releases">ORCA Versioning and Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/linting">Running Pylint Against Your Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/unit-tests">Unit Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/postgres-tests">Postgres Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/orca-logging">ORCA Logs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Developing Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-intro">Documentation Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-env">Development Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-add">Adding New Content</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-templates">Documentation Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-tasks">Task Documentation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/documentation-style-guide">Documentation Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-deploy">Deploying Documentation</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Deployment Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/deployment">Deployment Information</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/deployment-environment">Creating a Deployment Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/deployment-s3-bucket">Creating the Glacier Bucket</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/deployment-with-cumulus">Deploying ORCA with Cumulus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/deployment-upgrading-orca">Upgrading ORCA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/recovery-workflow">Recovery Workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/testing_deployment">Testing Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/deployment-guide/deploying-from-windows">Deploy from Windows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/api/orca-api">ORCA API Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Research</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-intro">Introduction to ORCA Research</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-localstack">Localstack Research Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-APIGateway">API Gateway Research Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-reconciliation">ORCA Reconciliation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-AuroraServerless">Aurora Serverless Research Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-graphql">GraphQL Research Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-multipart-chunksize">Multipart Chunksize Research Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/research/research-bamboo">Bamboo specs Research Notes</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Deploying ORCA with Cumulus</h1></header><div class="markdown"><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Prior to following this document, make sure that your <a href="/cumulus-orca/docs/developer/deployment-guide/deployment-environment">deployment environment</a>
is setup and an <a href="/cumulus-orca/docs/developer/deployment-guide/deployment-s3-bucket">ORCA archive glacier bucket</a> is
created.</p></div></div><p>ORCA is meant to be deployed with Cumulus. To deploy ORCA add and/or modify the
files in the Cumulus <code>cumulus-tf</code> deployment.</p><p>The general steps to deploy and use ORCA are:</p><ol><li><a href="#configuring-the-orca-deployment">Configure the ORCA deployment.</a></li><li><a href="#define-the-orca-wokflows">Define the ORCA Ingest and Recovery workflows.</a></li><li><a href="#deploy-orca-with-terraform">Deploy ORCA using terraform.</a></li><li><a href="#collection-configuration">Configure ORCA in the collection configuration of the running Cumulus instance.</a></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuring-the-orca-deployment"></a>Configuring the ORCA Deployment<a class="hash-link" href="#configuring-the-orca-deployment" title="Direct link to heading">#</a></h2><p>Follow the instructions for <a href="https://nasa.github.io/cumulus/docs/deployment/deployment-readme" target="_blank" rel="noopener noreferrer">deploying Cumulus</a>
on the Cumulus website through the configuration of the Cumulus module <code>cumulus-tf</code>.</p><p>Prior to deploying the <code>cumulus-tf</code> module, the following files need to be added
and/or modified to deploy ORCA with Cumulus.</p><ul><li>orca.tf</li><li>orca_variables.tf</li><li>terraform.tfvars</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-cumulus-tforcatf"></a>Creating <code>cumulus-tf/orca.tf</code><a class="hash-link" href="#creating-cumulus-tforcatf" title="Direct link to heading">#</a></h3><p>Create the <code>orca.tf</code> file in the <code>cumulus-tf</code> directory and copy the code below
into the new <code>orca.tf</code> file. Update the source variable with the preferred
ORCA version.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Only change the value of source</h5></div><div class="admonition-content"><p>Only change the value of <code>source</code> in the code example below to point to the
proper ORCA version. The ORCA version is specified right after <em>download</em> in the
URL path to the release. In the example below the release being used is v3.0.2.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly terraform"><div tabindex="0" class="prism-code language-terraform codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">## ORCA Module</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## =============================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module &quot;orca&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  source = &quot;https://github.com/nasa/cumulus-orca/releases/download/v3.0.2/cumulus-orca-terraform.zip&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## --------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Cumulus Variables</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## --------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## REQUIRED</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  buckets                  = var.buckets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  lambda_subnet_ids        = var.lambda_subnet_ids</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  permissions_boundary_arn = var.permissions_boundary_arn</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  prefix                   = var.prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  system_bucket            = var.system_bucket</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  vpc_id                   = var.vpc_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  workflow_config          = module.cumulus.workflow_config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## OPTIONAL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  tags        = var.tags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## --------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## ORCA Variables</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## --------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## REQUIRED</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  db_admin_password     = var.db_admin_password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  db_host_endpoint      = var.db_host_endpoint</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  db_user_password      = var.db_user_password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  orca_default_bucket   = var.orca_default_bucket</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  rds_security_group_id = var.rds_security_group_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## OPTIONAL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # db_admin_username                                    = &quot;postgres&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # default_multipart_chunksize_mb                       = 250</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # metadata_queue_message_retention_time                = 777600</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_ingest_lambda_memory_size                       = 2240</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_ingest_lambda_timeout                           = 600</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_buckets                                = []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_complete_filter_prefix                 = &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_expiration_days                        = 5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_lambda_memory_size                     = 128</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_lambda_timeout                         = 720</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_retry_limit                            = 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_retry_interval                         = 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # orca_recovery_retry_backoff                          = 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # sqs_delay_time_seconds                               = 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # sqs_maximum_message_size                             = 262144</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # staged_recovery_queue_message_retention_time_seconds = 432000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # status_update_queue_message_retention_time_seconds   = 777600</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="required-values-unique-to-the-orca-module"></a>Required Values Unique to the ORCA Module<a class="hash-link" href="#required-values-unique-to-the-orca-module" title="Direct link to heading">#</a></h4><p>The following variables are unique to the ORCA module and required to be set by
the user. More information about these required variables, as well as the
optional variables can be found in the <a href="#orca-variables">variables section</a>.</p><ul><li>db_admin_password</li><li>orca_default_bucket</li><li>db_user_password</li><li>db_host_endpoint</li><li>rds_security_group_id</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="required-values-retrieved-from-cumulus-variables"></a>Required Values Retrieved from Cumulus Variables<a class="hash-link" href="#required-values-retrieved-from-cumulus-variables" title="Direct link to heading">#</a></h4><p>The following variables are set as part of your Cumulus deployment and are
required by the ORCA module. More information about setting these variables can
be found in the <a href="https://github.com/nasa/cumulus/blob/master/tf-modules/cumulus/variables.tf" target="_blank" rel="noopener noreferrer">Cumulus variable definitions</a>.
The variables must be set with the proper values in the <code>terraform.tfvavrs</code> file.</p><ul><li>buckets</li><li>lambda_subnet_ids</li><li>permissions_boundary_arn</li><li>prefix</li><li>system_bucket</li><li>vpc_id</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Optional Cumulus Values</h5></div><div class="admonition-content"><p>The <code>tags</code> value automatically adds a <em>Deployment</em> tag like the Cumulus
deployment.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="required-values-retrieved-from-other-modules"></a>Required Values Retrieved from Other Modules<a class="hash-link" href="#required-values-retrieved-from-other-modules" title="Direct link to heading">#</a></h4><p>The following variables are set by retrieving output from other modules. This is
done so that the user does not have to lookup and set these variables after a
deployment. More information about these variables can be found in the
<a href="https://github.com/nasa/cumulus/blob/master/tf-modules/cumulus/variables.tf" target="_blank" rel="noopener noreferrer">Cumulus variable definitions</a>.</p><ul><li>workflow_config - Retrieved from the cumulus module in <code>main.tf</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-cumulus-tforca_variablestf"></a>Creating <code>cumulus-tf/orca_variables.tf</code><a class="hash-link" href="#creating-cumulus-tforca_variablestf" title="Direct link to heading">#</a></h3><p>In the <code>cumulus-tf</code> directory create the <code>orca_variables.tf</code> file. Copy the
contents below into the file so that the ORCA unique variables are defined.
For more information on the variables, see the <a href="#orca-variables">variables section</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly terraform"><div tabindex="0" class="prism-code language-terraform codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">## Variables unique to ORCA</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## REQUIRED</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">variable &quot;db_admin_password&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description = &quot;Password for RDS database administrator authentication&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type        = string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">variable &quot;db_user_password&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description = &quot;Password for RDS database user authentication&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type        = string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">variable &quot;db_host_endpoint&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type        = string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description = &quot;Database host endpoint to connect to.&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">variable &quot;orca_default_bucket&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type        = string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description = &quot;Default ORCA S3 Glacier bucket to use.&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">variable &quot;rds_security_group_id&quot; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type        = string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description = &quot;Cumulus&#x27; RDS Security Group&#x27;s ID.&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="modifying-cumulus-tfterraformtfvars"></a>Modifying <code>cumulus-tf/terraform.tfvars</code><a class="hash-link" href="#modifying-cumulus-tfterraformtfvars" title="Direct link to heading">#</a></h3><p>At the end of the <code>terrafor.tfvars</code> file, add the following code. Update the
required and optional variable values to the values needed for your particular
environment.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The example below shows the minimum variables to set for the module and accepting
default values for all of the optional items. The <a href="#orca-variables">ORCA variables section</a>
provides additional information on variables that can be set for the ORCA application.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly terraform"><div tabindex="0" class="prism-code language-terraform codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">## =============================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## ORCA Variables</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## =============================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## REQUIRED TO BE SET</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## -----------------------------------------------------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## ORCA application database user password.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">db_user_password = &quot;my-super-secret-orca-application-user-password&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## Default ORCA S3 Glacier bucket to use</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">orca_default_bucket = &quot;orca-archive-primary&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## PostgreSQL database (root) user password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">db_admin_password = &quot;my-super-secret-database-owner-password&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## PostgreSQL database host endpoint to connect to.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">db_host_endpoint = &quot;aws.postgresrds.host&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## Cumulus&#x27; RDS Security Group&#x27;s ID.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rds_security_group_id = &quot;sg-01234567890123456&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Below describes the type of value expected for each variable.</p><ul><li><code>db_user_password</code> (string) - the password for the application user.</li><li><code>orca_default_bucket</code> (string) - default S3 glacier bucket to use for ORCA data.</li><li><code>db_admin_password</code> (string) - password for the postgres user.</li><li><code>db_host_endpoint</code>(string) - Database host endpoint to connect to.</li><li><code>rds_security_group_id</code>(string) - Cumulus&#x27; RDS Security Group&#x27;s ID. Output as <code>security_group_id</code> from the rds-cluster deployment.</li></ul><p>Additional variable definitions can be found in the <a href="#orca-variables">ORCA variables</a>
section of the document.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>The cumulus <code>buckets</code> variable will have to be modified to include the
disaster recovery buckets with a <em>type</em> of <strong>orca</strong>. An example can be seen below.
This addition is required for ORCA to have the proper bucket permissions to
work with Cumulus.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly terraform"><div tabindex="0" class="prism-code language-terraform codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">buckets = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  orca_default = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;orca-archive-primary&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type = &quot;orca&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  internal = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;orca-internal&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type = &quot;internal&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  private = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;orca-private&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type = &quot;private&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  protected = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;orca-protected&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type = &quot;protected&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;orca-public&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type = &quot;public&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="define-the-orca-workflows"></a>Define the ORCA Workflows<a class="hash-link" href="#define-the-orca-workflows" title="Direct link to heading">#</a></h2><p>The ORCA Ingest Workflows follows each step listed below. Adding the Move
Granule Step and Add the Copy To Glacier Step are detailed in their respective
sections.</p><p><strong>ORCA Ingest Workflow</strong>
SyncGranule
FilesToGranuleStep
MoveGranuleStep
CopyToGlacier</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="add-the-move-granule-step-to-an-ingest-workflow"></a>Add the Move Granule Step to an Ingest Workflow<a class="hash-link" href="#add-the-move-granule-step-to-an-ingest-workflow" title="Direct link to heading">#</a></h3><p>Navigate to <code>cumulus-tf/ingest_granule_workflow.tf</code> then add the following
step anywhere after the FilesToGranuleStep step being sure to change the
FilesToGranuleStep&#x27;s <code>&quot;Next&quot;</code> parameter equal to &quot;MoveGranuleStep&quot;.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Adjust the <code>&quot;Next&quot;</code> step in the example below to point to the proper step in
the ingest workflow.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;MoveGranuleStep&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Parameters&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;cma&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;event.$&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;task_config&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;bucket&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.buckets.internal.name}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;buckets&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.buckets}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;distribution_endpoint&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.distribution_endpoint}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;collection&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;duplicateHandling&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.duplicateHandling}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;s3MultipartChunksizeMb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.meta.s3MultipartChunksizeMb}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;cumulus_message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">&quot;outputs&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;source&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;destination&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.payload}&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token property">&quot;source&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.granules}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;destination&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.processed_granules}&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Task&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Resource&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${move_granules_task_arn}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Retry&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;ErrorEquals&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Lambda.ServiceException&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Lambda.AWSLambdaException&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Lambda.SdkClientException&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;IntervalSeconds&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;MaxAttempts&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;BackoffRate&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Catch&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;ErrorEquals&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;States.ALL&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;ResultPath&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.exception&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;Next&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;WorkflowFailed&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="add-the-copy-to-glacier-step-to-an-ingest-workflow"></a>Add the Copy To Glacier Step to an Ingest Workflow<a class="hash-link" href="#add-the-copy-to-glacier-step-to-an-ingest-workflow" title="Direct link to heading">#</a></h3><p>Navigate to <code>cumulus-tf/ingest_granule_workflow.tf</code> then add the following step
anywhere after the MoveGranuleStep step being sure to change the MoveGranuleStep&#x27;s
<code>&quot;Next&quot;</code> parameter equal to &quot;CopyToGlacier&quot;.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Adjust the <code>&quot;Next&quot;</code> step in the example below to point to the proper step in
the ingest workflow.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;CopyToGlacier&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Parameters&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;cma&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;event.$&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;task_config&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;excludeFileTypes&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.meta.excludeFileTypes}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;s3MultipartChunksizeMb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.meta.s3MultipartChunksizeMb}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;providerId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.provider.id}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;providerName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.provider.name}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;executionId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.cumulus_meta.execution_name}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;collectionShortname&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.name}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;collectionVersion&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.version}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;orcaDefaultBucketOverride&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.meta.orcaDefaultBucketOverride}&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Task&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Resource&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;module.orca.orca_lambda_copy_to_glacier_arn&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Catch&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ErrorEquals&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;States.ALL&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ResultPath&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.exception&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Next&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;WorkflowFailed&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Retry&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ErrorEquals&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;States.ALL&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;IntervalSeconds&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;MaxAttempts&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;BackoffRate&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Next&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;WorkflowSucceeded&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>See the copy_to_glacier json schema <a href="https://github.com/nasa/cumulus-orca/blob/master/tasks/copy_to_glacier/schemas/config.json" target="_blank" rel="noopener noreferrer">configuration file</a>, <a href="https://github.com/nasa/cumulus-orca/blob/master/tasks/copy_to_glacier/schemas/input.json" target="_blank" rel="noopener noreferrer">input file</a>  and <a href="https://github.com/nasa/cumulus-orca/blob/master/tasks/copy_to_glacier/schemas/output.json" target="_blank" rel="noopener noreferrer">output file</a> for more information.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="modify-the-recovery-workflow-optional"></a>Modify the Recovery Workflow (<em>OPTIONAL</em>)<a class="hash-link" href="#modify-the-recovery-workflow-optional" title="Direct link to heading">#</a></h3><p>It is not recommended to modify the ORCA Recovery Workflow. The workflow JSON
file is located in the <code>modules/workflows/OrcaRecoveryWorkflow</code> of the repository.
The workflow file name is <code>orca_recover_workflow.asl.json</code>. To change the
behavior of the workflow, it is recommended to modify or replace the
<code>copy_files_to_archive</code> lambda.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="workflow-failures"></a>Workflow Failures<a class="hash-link" href="#workflow-failures" title="Direct link to heading">#</a></h3><p>Failures within ORCA break through to the Cumulus workflow they are a part
of. More information on addressing workflow failures can be found on the
ORCA <a href="/cumulus-orca/docs/developer/development-guide/code/best-practices">Best Practices</a>
page.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="orca-variables"></a>ORCA Variables<a class="hash-link" href="#orca-variables" title="Direct link to heading">#</a></h2><p>The following sections detail the variables used by the ORCA module.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="required-variables"></a>Required Variables<a class="hash-link" href="#required-variables" title="Direct link to heading">#</a></h3><p>The following variables are required for the ORCA module and must be set to valid
values.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cumulus-required-variables"></a>Cumulus Required Variables<a class="hash-link" href="#cumulus-required-variables" title="Direct link to heading">#</a></h4><p>The following variables should be present already in the <code>cumulus-tf/terrafor.tfvars</code>
file. The variables must be set with proper values for your environment in the
<code>cumulus-tf/terraform.tfvars</code> file.</p><table><thead><tr><th>Variable</th><th>Definition</th><th>Example Value</th></tr></thead><tbody><tr><td><code>buckets</code></td><td>Mapping of all S3 buckets used by Cumulus and ORCA that contains a S3 <code>name</code> and <code>type</code>. A bucket with a <code>type</code> of <strong>orca</strong> is required.</td><td><code>buckets = { orca_default = { name = &quot;PREFIX-orca-primary&quot;, type = &quot;orca&quot;, ...}}</code></td></tr><tr><td><code>lambda_subnet_ids</code></td><td>A list of subnets that the Lambda&#x27;s and the database have access to for working with Cumulus.</td><td>[&quot;subnet-12345&quot;, &quot;subnet-abc123&quot;]</td></tr><tr><td><code>permissions_boundary_arn</code></td><td>AWS ARN value of the permission boundary for the VPC account.</td><td>&quot;arn:aws:iam::1234567890:policy/NGAPShRoleBoundary&quot;</td></tr><tr><td><code>prefix</code></td><td>Prefix that will be pre-pended to resource names created by terraform.</td><td>&quot;daac-sndbx&quot;</td></tr><tr><td><code>system_bucket</code></td><td>Cumulus system bucket used to store internal files and configurations for deployments.</td><td>&quot;PREFIX-internal&quot;</td></tr><tr><td><code>vpc_id</code></td><td>ID of VPC to place resources in - recommended that this be a private VPC (or at least one with restricted access).</td><td>&quot;vpc-abc123456789&quot;</td></tr><tr><td><code>workflow_config</code></td><td>Configuration object with ARNs for workflow integration (Role ARN for executing workflows and Lambda ARNs to trigger on workflow execution).</td><td>module.cumulus.workflow_config</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="orca-required-variables"></a>ORCA Required Variables<a class="hash-link" href="#orca-required-variables" title="Direct link to heading">#</a></h4><p>The following variables should be present in the <code>cumulus-tf/orca_variables.tf</code>
file. The variables must be set with proper values for your environment in the
<code>cumulus-tf/terraform.tfvars</code> file.</p><table><thead><tr><th>Variable</th><th>Definition</th><th>Example Value</th></tr></thead><tbody><tr><td><code>db_admin_password</code></td><td>Password for RDS database administrator authentication</td><td>&quot;My_Sup3rS3cr3t_admin_Passw0rd&quot;</td></tr><tr><td><code>db_host_endpoint</code></td><td>Database host endpoint to connect to.</td><td>&quot;aws.postgresrds.host&quot;</td></tr><tr><td><code>db_user_password</code></td><td>Password for RDS database user authentication</td><td>&quot;My_Sup3rS3cr3tuserPassw0rd&quot;</td></tr><tr><td><code>orca_default_bucket</code></td><td>Default ORCA S3 Glacier bucket to use.</td><td>&quot;PREFIX-orca-primary&quot;</td></tr><tr><td><code>rds_security_group_id</code></td><td>Cumulus&#x27; RDS Security Group&#x27;s ID.</td><td>&quot;sg-01234567890123456&quot;</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optional-variables"></a>Optional Variables<a class="hash-link" href="#optional-variables" title="Direct link to heading">#</a></h3><p>The following variables are optional for the ORCA module and can be set by the
end user to better adjust ORCA for their specific environment.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cumulus-optional-variables"></a>Cumulus Optional Variables<a class="hash-link" href="#cumulus-optional-variables" title="Direct link to heading">#</a></h4><p>The following variables should be present already in the <code>cumulus-tf/terrafor.tfvars</code>
file. The variables can be set with proper values for your environment in the
<code>cumulus-tf/terraform.tfvars</code> file. It is recommended that the <code>region</code> variable
is set to the proper AWS region for deployments.</p><table><thead><tr><th>Variable</th><th>Definition</th><th>Example Value</th></tr></thead><tbody><tr><td><code>tags</code></td><td>Tags to be applied to resources that support tags.</td><td><code>{ environment = &quot;development&quot;, developer = &quot;me&quot; }</code></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="orca-optional-variables"></a>ORCA Optional Variables<a class="hash-link" href="#orca-optional-variables" title="Direct link to heading">#</a></h4><p>The following variables should be present in the <code>cumulus-tf/orca_variables.tf</code>
file. The variables can be set with proper values for your environment in the
<code>cumulus-tf/terraform.tfvars</code> file. The default setting for each of the optional
variables is shown in the table below.</p><table><thead><tr><th>Variable</th><th>Type</th><th>Definition</th><th>Default</th></tr></thead><tbody><tr><td><code>db_admin_username</code></td><td>string</td><td>Username for RDS database administrator authentication.</td><td>&quot;postgres&quot;</td></tr><tr><td><code>default_multipart_chunksize_mb</code></td><td>number</td><td>The default maximum size of chunks to use when copying. Can be overridden by collection config.</td><td>250</td></tr><tr><td><code>metadata_queue_message_retention_time_seconds</code></td><td>number</td><td>Number of seconds the metadata-queue fifo SQS retains a message.</td><td>777600</td></tr><tr><td><code>db_name</code></td><td>string</td><td>The name of the Orca database within the RDS cluster. Any <code>-</code> in <code>prefix</code> will be replaced with <code>_</code>.</td><td>PREFIX_orca</td></tr><tr><td><code>orca_ingest_lambda_memory_size</code></td><td>number</td><td>Amount of memory in MB the ORCA copy_to_glacier lambda can use at runtime.</td><td>2240</td></tr><tr><td><code>orca_ingest_lambda_timeout</code></td><td>number</td><td>Timeout in number of seconds for ORCA copy_to_glacier lambda.</td><td>600</td></tr><tr><td><code>orca_recovery_buckets</code></td><td>List (string)</td><td>List of bucket names that ORCA has permissions to restore data to. Default is all in the <code>buckets</code> map.</td><td>[]</td></tr><tr><td><code>orca_recovery_complete_filter_prefix</code></td><td>string</td><td>Specifies object key name prefix by the Glacier Bucket trigger.</td><td>&quot;&quot;</td></tr><tr><td><code>orca_recovery_expiration_days</code></td><td>number</td><td>Number of days a recovered file will remain available for copy.</td><td>5</td></tr><tr><td><code>orca_recovery_lambda_memory_size</code></td><td>number</td><td>Amount of memory in MB the ORCA recovery lambda can use at runtime.</td><td>128</td></tr><tr><td><code>orca_recovery_lambda_timeout</code></td><td>number</td><td>Timeout in number of seconds for ORCA recovery lambdas.</td><td>720</td></tr><tr><td><code>orca_recovery_retry_limit</code></td><td>number</td><td>Maximum number of retries of a recovery failure before giving up.</td><td>3</td></tr><tr><td><code>orca_recovery_retry_interval</code></td><td>number</td><td>Number of seconds to wait between recovery failure retries.</td><td>1</td></tr><tr><td><code>sqs_delay_time_seconds</code></td><td>number</td><td>Number of seconds that the delivery of all messages in the queue will be delayed.</td><td>0</td></tr><tr><td><code>sqs_maximum_message_size</code></td><td>number</td><td>The limit of how many bytes a message can contain before Amazon SQS rejects it.</td><td>262144</td></tr><tr><td><code>staged_recovery_queue_message_retention_time_seconds</code></td><td>number</td><td>Number of seconds the staged-recovery-queue fifo SQS retains a message.</td><td>432000</td></tr><tr><td><code>status_update_queue_message_retention_time_seconds</code></td><td>number</td><td>Number of seconds the status_update_queue fifo SQS retains a message.</td><td>777600</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="orca-module-outputs"></a>ORCA Module Outputs<a class="hash-link" href="#orca-module-outputs" title="Direct link to heading">#</a></h2><p>The orca module provides the outputs seen below in the table. Outputs are
accessed using terraform dot syntax in the format of <code>module.orca.variable_name</code>.</p><table><thead><tr><th>Output Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>orca_catalog_reporting_api_invoke_url</code></td><td>The URL to invoke the API for catalog reporting lambda</td></tr><tr><td><code>orca_cumulus_reconciliation_api_deployment_invoke_url</code></td><td>The URL to invoke the ORCA Cumulus reconciliation API gateway. Excludes the resource path</td></tr><tr><td><code>orca_lambda_copy_to_glacier_arn</code></td><td>AWS ARN of the ORCA copy_to_glacier lambda.</td></tr><tr><td><code>orca_lambda_extract_filepaths_for_granule_arn</code></td><td>AWS ARN of the ORCA extract_filepaths_for_granule lambda.</td></tr><tr><td><code>orca_lambda_orca_catalog_reporting_arn</code></td><td>AWS ARN of the ORCA orca_catalog_reporting lambda.</td></tr><tr><td><code>orca_lambda_request_files_arn</code></td><td>AWS ARN of the ORCA request_files lambda.</td></tr><tr><td><code>orca_lambda_copy_files_to_archive_arn</code></td><td>AWS ARN of the ORCA copy_files_to_archive lambda.</td></tr><tr><td><code>orca_lambda_request_status_for_granule_arn</code></td><td>AWS ARN of the ORCA request_status_for_granule lambda.</td></tr><tr><td><code>orca_lambda_request_status_for_job_arn</code></td><td>AWS ARN of the ORCA request_status_for_job lambda.</td></tr><tr><td><code>orca_lambda_post_copy_request_to_queue_arn</code></td><td>AWS ARN of the ORCA post_copy_request_to_queue lambda.</td></tr><tr><td><code>orca_lambda_orca_catalog_reporting_arn</code></td><td>AWS ARN of the ORCA orca_catalog_reporting lambda.</td></tr><tr><td><code>orca_secretsmanager_arn</code></td><td>The Amazon Resource Name (ARN) of the AWS secretsmanager</td></tr><tr><td><code>orca_sqs_metadata_queue_arn</code></td><td>The ARN of the metadata-queue SQS</td></tr><tr><td><code>orca_sqs_metadata_queue_id</code></td><td>The URL ID of the metadata-queue SQS</td></tr><tr><td><code>orca_sqs_staged_recovery_queue_arn</code></td><td>The ARN of the staged-recovery-queue SQS</td></tr><tr><td><code>orca_sqs_staged_recovery_queue_id</code></td><td>The URL ID of the staged-recovery-queue SQS</td></tr><tr><td><code>orca_sqs_status_update_queue_arn</code></td><td>The ARN of the status-update-queue SQS</td></tr><tr><td><code>orca_sqs_status_update_queue_id</code></td><td>The URL ID of the status-update-queue SQS</td></tr><tr><td><code>orca_subnet_group_id</code></td><td>The ORCA database subnet group name</td></tr><tr><td><code>orca_subnet_group_arn</code></td><td>The ARN of the ORCA database subnet group</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deploy-orca-with-terraform"></a>Deploy ORCA with Terraform<a class="hash-link" href="#deploy-orca-with-terraform" title="Direct link to heading">#</a></h2><p>In the proper module directory, initialize and apply changes using the commands
below.</p><ol><li>Run <code>terraform init</code>.</li><li>Run <code>terraform plan</code> #optional, but allows you to preview the deploy.</li><li>Run <code>terraform apply</code>.</li></ol><p>This commands above will create and deploy ORCA. To delete the created objects,
run <code>terraform destroy</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="collection-configuration"></a>Collection Configuration<a class="hash-link" href="#collection-configuration" title="Direct link to heading">#</a></h2><p>To configure a collection to enable ORCA, add the line
<code>&quot;granuleRecoveryWorkflow&quot;: &quot;OrcaRecoveryWorkflow&quot;</code> to the collection configuration
as seen below. Optionally, you can exclude files by adding values to an
<code>&quot;excludeFileTypes&quot;</code> variable as seen below. In addition, when dealing with large
files, the <code>&quot;s3MultipartChunksizeMb&quot;</code> variable can also be set to override the
default setting set during ORCA installation. For more information, see the documentation on the
<a href="https://github.com/nasa/cumulus-orca/tree/master/tasks/copy_to_glacier" target="_blank" rel="noopener noreferrer"><code>copy_to_glacier</code> task</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;queriedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2019-11-07T22:49:46.842Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L0A_HR_RAW&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;version&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;sampleFileName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L0A_HR_RAW_product_0001-of-0420.h5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;dataType&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L0A_HR_RAW&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;granuleIdExtraction&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^(.*)((\\.cmr\\.json)|(\\.iso\\.xml)|(\\.tar\\.gz)|(\\.h5)|(\\.h5\\.mp))$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;reportToEms&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;granuleId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^.*$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;provider_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L0A_HR_RAW/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;meta&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;granuleRecoveryWorkflow&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;OrcaRecoveryWorkflow&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;excludeFileTypes&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.cmr&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.xml&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.met&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;s3MultipartChunksizeMb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">400</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;orcaDefaultBucketOverride&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;prod_orca_worm&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="enable-recover-granule-button"></a>Enable <code>Recover Granule</code> Button<a class="hash-link" href="#enable-recover-granule-button" title="Direct link to heading">#</a></h2><p>To enable the <code>Recover Granule</code> button on the Cumulus Dashboard (available at github.com/nasa/cumulus-dashboard),
set the environment variable <code>ENABLE_RECOVERY=true</code>.</p><p>Here is an sample command to run the Cumulus Dashboard locally.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">APIROOT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">https://uttm5y1jcj.execute-api.us-west-2.amazonaws.com:8000/dev </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ENABLE_RECOVERY</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run serve</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/nasa/cumulus-orca/edit/develop/website/docs/developer/deployment-guide/deployment-with-cumulus.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cumulus-orca/docs/developer/deployment-guide/deployment-s3-bucket"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Creating the Glacier Bucket</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cumulus-orca/docs/developer/deployment-guide/deployment-upgrading-orca"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Upgrading ORCA Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuring-the-orca-deployment" class="table-of-contents__link">Configuring the ORCA Deployment</a><ul><li><a href="#creating-cumulus-tforcatf" class="table-of-contents__link">Creating <code>cumulus-tf/orca.tf</code></a></li><li><a href="#creating-cumulus-tforca_variablestf" class="table-of-contents__link">Creating <code>cumulus-tf/orca_variables.tf</code></a></li><li><a href="#modifying-cumulus-tfterraformtfvars" class="table-of-contents__link">Modifying <code>cumulus-tf/terraform.tfvars</code></a></li></ul></li><li><a href="#define-the-orca-workflows" class="table-of-contents__link">Define the ORCA Workflows</a><ul><li><a href="#add-the-move-granule-step-to-an-ingest-workflow" class="table-of-contents__link">Add the Move Granule Step to an Ingest Workflow</a></li><li><a href="#add-the-copy-to-glacier-step-to-an-ingest-workflow" class="table-of-contents__link">Add the Copy To Glacier Step to an Ingest Workflow</a></li><li><a href="#modify-the-recovery-workflow-optional" class="table-of-contents__link">Modify the Recovery Workflow (<em>OPTIONAL</em>)</a></li><li><a href="#workflow-failures" class="table-of-contents__link">Workflow Failures</a></li></ul></li><li><a href="#orca-variables" class="table-of-contents__link">ORCA Variables</a><ul><li><a href="#required-variables" class="table-of-contents__link">Required Variables</a></li><li><a href="#optional-variables" class="table-of-contents__link">Optional Variables</a></li></ul></li><li><a href="#orca-module-outputs" class="table-of-contents__link">ORCA Module Outputs</a></li><li><a href="#deploy-orca-with-terraform" class="table-of-contents__link">Deploy ORCA with Terraform</a></li><li><a href="#collection-configuration" class="table-of-contents__link">Collection Configuration</a></li><li><a href="#enable-recover-granule-button" class="table-of-contents__link">Enable <code>Recover Granule</code> Button</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/developer/quickstart/developer-intro">ORCA Developer Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/operator/operator-intro">ORCA Operator Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/ORCA+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">ORCA Working Group</a></li><li class="footer__item"><a href="https://github.com/nasa/cumulus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Project</a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Integrators+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Integrator Working Group</a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Operator+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Operator Working Group</a></li><li class="footer__item"><a href="https://nasa.github.io/cumulus/docs/cumulus-docs-readme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/cumulus-orca/assets/js/runtime~main.766c6591.js"></script>
<script src="/cumulus-orca/assets/js/main.080ad3c4.js"></script>
</body>
</html>