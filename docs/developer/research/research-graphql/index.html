<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/cumulus-orca/blog/rss.xml" title="Operational Recovery Cloud Archive (ORCA) Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cumulus-orca/blog/atom.xml" title="Operational Recovery Cloud Archive (ORCA) Blog Atom Feed"><title data-react-helmet="true">GraphQL Research Notes | Operational Recovery Cloud Archive (ORCA)</title><meta data-react-helmet="true" property="og:url" content="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/research/research-graphql"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="GraphQL Research Notes | Operational Recovery Cloud Archive (ORCA)"><meta data-react-helmet="true" name="description" content="Research Notes on GraphQL."><meta data-react-helmet="true" property="og:description" content="Research Notes on GraphQL."><link data-react-helmet="true" rel="shortcut icon" href="/cumulus-orca/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/research/research-graphql"><link data-react-helmet="true" rel="alternate" href="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/research/research-graphql" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nasa.github.io/cumulus-orca//cumulus-orca/docs/developer/research/research-graphql" hreflang="x-default"><link rel="stylesheet" href="/cumulus-orca/assets/css/styles.02bb2c96.css">
<link rel="preload" href="/cumulus-orca/assets/js/runtime~main.80f6c987.js" as="script">
<link rel="preload" href="/cumulus-orca/assets/js/main.4a0e79b2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cumulus-orca/"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Operational Recovery Cloud Archive (ORCA)</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Guide</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/operator/operator-intro">Operator Guide</a><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cumulus-orca/"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Operational Recovery Cloud Archive (ORCA)</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a></li><li class="menu__list-item"><a class="menu__link" href="/cumulus-orca/docs/operator/operator-intro">Operator Guide</a></li><li class="menu__list-item"><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Quick Start Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development Guide</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Developing Code</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/contrib-code-intro">Code Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/setup-dev-env">Setting Up a Dev Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/best-practices">Best Practices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/versioning-releases">ORCA Versioning and Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/linting">Running Pylint Against Your Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/unit-tests">Unit Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/postgres-tests">Postgres Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/code/orca-logging">ORCA Logs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Developing Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-intro">Documentation Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-env">Development Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-add">Adding New Content</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-templates">Documentation Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-tasks">Task Documentation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/documentation-style-guide">Documentation Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-deploy">Deploying Documentation</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployment Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/deployment-guide/deployment">Deployment Information</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/deployment-guide/deployment-environment">Creating a Deployment Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/deployment-guide/deployment-s3-bucket">Creating the Glacier Bucket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/deployment-guide/deployment-with-cumulus">Deploying ORCA with Cumulus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/deployment-guide/deployment-upgrading-orca">Upgrading ORCA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/deployment-guide/recovery-workflow">Recovery Workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cumulus-orca/docs/developer/deployment-guide/testing_deployment">Testing Deployment</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Research</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-intro">Introduction to ORCA Research</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-localstack">Localstack Research Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-APIGateway">API Gateway Research Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-reconciliation">ORCA Reconciliation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/research/research-AuroraServerless">Aurora Serverless Research Notes</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/cumulus-orca/docs/developer/research/research-graphql">GraphQL Research Notes</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">GraphQL Research Notes</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p><a href="https://graphql.org/" target="_blank" rel="noopener noreferrer">GraphQL</a> is an open-source data query and manipulation language for APIs, and a runtime for fulfilling queries with existing data.</p><ul><li>A GraphQL server provides a client with a predefined schema written down in Schema Definition Language (SDL). </li><li>The schema defines the queries that can be made.</li><li>The SDL consists of <code>Type</code>that describe object types that can be queried on that server and the fields they have.</li><li>It can return many resources in a single request which makes it faster then REST API. An example of a type <code>Project</code> written using SDL is shown below:<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly commandline"><div tabindex="0" class="prism-code language-commandline codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Project {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> name: String!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> id: Int!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div>The following shows an example of a query using GraphQL which will return all the Project names and ID.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly commandline"><div tabindex="0" class="prism-code language-commandline codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Project</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly commandline"><div tabindex="0" class="prism-code language-commandline codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Output:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;data&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Project&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;ORCA&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pros-and-cons"></a>Pros and cons<a class="hash-link" href="#pros-and-cons" title="Direct link to heading">#</a></h3><p>Pros:</p><ul><li>Able to get many resources in a single request compared to REST API.</li><li>Able to only fetch the needed information in a single request instead of fetching all the data.</li><li>There is no need to validate the data format, as GraphQL will do the validation. Developers need only to write resolvers â€“ how the data will be received.</li><li>A developer can view the available data before making the request.</li><li>There is only one version of GraphQL API thus allowing more maintainable and cleaner code.</li><li>Shows detailed error message including all the resolvers and referring to the exact query part during error in query. This is useful during debugging.</li></ul><p>Cons:</p><ul><li>Performance issues with complex queries- it could face performance issues if a client asks for too many nested fields at once.</li><li>Not recommended for small applications. Moreover, the learning curve is higher compared to other methods.</li><li>File uploading is a bit complex.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="graphql-servers"></a>GraphQL Servers<a class="hash-link" href="#graphql-servers" title="Direct link to heading">#</a></h3><p>There are numerous servers for GraphQL that support different programming languages. A list of all the servers can be seen <a href="https://graphql.org/code/" target="_blank" rel="noopener noreferrer">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="prebuilt-graphql-servers"></a>Prebuilt GraphQL servers<a class="hash-link" href="#prebuilt-graphql-servers" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aws-appsync"></a>AWS AppSync<a class="hash-link" href="#aws-appsync" title="Direct link to heading">#</a></h4><ul><li><a href="https://aws.amazon.com/appsync/" target="_blank" rel="noopener noreferrer">AWS AppSync</a> is a fully managed service that develops GraphQL APIs by handling the heavy lifting of securely connecting to data sources like AWS DynamoDB, Lambda, and more. </li><li>automatically scales GraphQL API execution engine up and down to meet API request volumes.</li><li>Pricing is $4.00 per million Query and Data Modification Operations and $0.08 per million minutes of connection to the AWS AppSync service. Details of pricing can be found <a href="https://aws.amazon.com/appsync/pricing/" target="_blank" rel="noopener noreferrer">here</a>.</li><li>Details on deploying  AppSync GraphQL API using terraform can be found below.<ul><li><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/appsync_graphql_api" target="_blank" rel="noopener noreferrer">terraform docs</a>.</li><li><a href="https://tech.ovoenergy.com/deploying-appsync-with-terraform/" target="_blank" rel="noopener noreferrer">Deploying AppSync with Terraform</a></li></ul></li></ul><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>As of 07/18/2021, AWS AppSync is currently yet not approved in NGAP AWS account by NASA. However, it could be a good future approach when approved. </p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hasura"></a>Hasura<a class="hash-link" href="#hasura" title="Direct link to heading">#</a></h4><ul><li><a href="https://hasura.io/" target="_blank" rel="noopener noreferrer">Hasura</a> is an open source service that can create APIs without having to build, operate &amp; scale a GraphQL server.</li><li>Supports GraphQL on Postgres, AWS Aurora, Microsoft SQL server.</li><li>Can be run in <a href="https://hasura.io/docs/latest/graphql/cloud/getting-started/index.html#cloud-getting-started" target="_blank" rel="noopener noreferrer">cloud</a> (fastest way) or using <a href="https://hasura.io/docs/latest/graphql/core/getting-started/docker-simple.html#docker-simple" target="_blank" rel="noopener noreferrer">docker locally</a>.</li><li>comes with its own authentication and authorization features. To prevent GraphQL endpoint from being publicly accessible, developers have to create an <a href="https://hasura.io/docs/latest/graphql/core/deployment/deployment-guides/docker.html#docker-secure" target="_blank" rel="noopener noreferrer">admin secret</a>.</li><li><a href="https://hasura.io/pricing/" target="_blank" rel="noopener noreferrer">Pricing</a>- Fully managed cloud service is $99/month/project and supports upto 20GB data with $2/additional GB data.</li><li>written in Haskell programming language.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="postgraphile"></a>PostGraphile<a class="hash-link" href="#postgraphile" title="Direct link to heading">#</a></h4><ul><li><a href="https://www.graphile.org/postgraphile/" target="_blank" rel="noopener noreferrer">Postgraphile</a> is similar to Hasura and can create GraphQL API from a PostgreSQL schema faster.</li><li>Most operations can be performed using <a href="https://www.graphile.org/postgraphile/usage-cli/" target="_blank" rel="noopener noreferrer">CLI</a>.</li><li>uses PostgreSQL&#x27;s &quot;role-based grant system&quot; and &quot;row-level security policies&quot;.</li><li><a href="https://www.graphile.org/postgraphile/pricing/" target="_blank" rel="noopener noreferrer">Pricing</a> is $25/month for PostGraphile Pro which has additional features compared to PostGraphile.</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p> PostGraphile can be deployed using AWS lambda on Mac, Linux or Windows. Check <a href="https://github.com/graphile/postgraphile-lambda-example" target="_blank" rel="noopener noreferrer">this example</a>.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="apollo-server"></a>Apollo Server<a class="hash-link" href="#apollo-server" title="Direct link to heading">#</a></h4><ul><li><a href="https://www.apollographql.com/docs/apollo-server/" target="_blank" rel="noopener noreferrer">Apollo Server</a> is open source and uses javascript.</li><li>needs <a href="https://npm.im/apollo-server" target="_blank" rel="noopener noreferrer">apollo-server</a> and <a href="https://npm.im/graphql" target="_blank" rel="noopener noreferrer">graphql</a> libraries as preriquisites.</li><li>Pricing- $59/user /month</li><li>A good example to create the server can be found [here].(<a href="https://www.apollographql.com/docs/apollo-server/getting-started/" target="_blank" rel="noopener noreferrer">https://www.apollographql.com/docs/apollo-server/getting-started/</a>)</li><li>It can be deployed using lambda in AWS by utilizing serverless framework. A few examples are given below.<ul><li><a href="https://www.apollographql.com/docs/apollo-server/deployment/lambda/" target="_blank" rel="noopener noreferrer">How to deploy Apollo Server with AWS Lambda</a></li><li><a href="https://itnext.io/how-to-build-a-serverless-apollo-graphql-server-with-aws-lambda-webpack-and-typescript-64a377739208" target="_blank" rel="noopener noreferrer">How to Build a Serverless Apollo GraphQL Server with AWS Lambda, Webpack and TypeScript</a></li></ul></li><li>Can be deployed faster using <a href="https://www.apollographql.com/docs/apollo-server/deployment/heroku/" target="_blank" rel="noopener noreferrer">Heroku</a> but has additional cost.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="building-own-graphql-servers"></a>Building own GraphQL servers<a class="hash-link" href="#building-own-graphql-servers" title="Direct link to heading">#</a></h3><ul><li><a href="https://graphql.org/graphql-js/" target="_blank" rel="noopener noreferrer">GraphQL.js</a>- Server using Javascript.</li><li><a href="https://www.apollographql.com/docs/" target="_blank" rel="noopener noreferrer">Apollo Server</a>- Server using Javascript.</li><li><a href="https://github.com/graphql/express-graphql" target="_blank" rel="noopener noreferrer">Express GraphQL</a>- Server using Javascript.</li><li><a href="https://github.com/graphql-python/graphene" target="_blank" rel="noopener noreferrer">Graphehe</a>- Server using Python. Most popular and contributors.</li><li><a href="https://ariadnegraphql.org/" target="_blank" rel="noopener noreferrer">Ariadne</a>- Server using Python</li><li><a href="https://strawberry.rocks/" target="_blank" rel="noopener noreferrer">Strawberry</a>- Server using Python</li><li><a href="https://git.earthdata.nasa.gov/projects/CMRQL/repos/hackfest-cmr-graphql/browse" target="_blank" rel="noopener noreferrer">CMR-GraphQL</a>- Currently being used by NASA GHRC developers Check out the example of their GraphQL schema and resolver <a href="https://git.earthdata.nasa.gov/projects/CMRQL/repos/hackfest-cmr-graphql/browse/cmr-graphql/graphql/graphql.js" target="_blank" rel="noopener noreferrer">here</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="graphql-in-orca"></a>GraphQL in ORCA<a class="hash-link" href="#graphql-in-orca" title="Direct link to heading">#</a></h3><p>Some of the lambdas that might be affected are:</p><ul><li>post_copy_request_to_queue</li><li>db_deploy</li><li>post_to_database</li><li>request_files</li><li>copy_files_to_archive</li><li>request_status_for_granule</li><li>request_status_for_job</li><li>db_deploy</li><li>post_to_database</li></ul><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Apart from updating those lambdas, developers need to create the GraphQL endpoint using terraform or AWS SAM, update requirements.txt, requirements-dev.txt or bin/build.sh, bin/run_tests.sh by adding additional dependiencies like <code>graphene</code> in case of using graphene, or <code>npm install apollo-server graphql</code> in case of using Apollo server.
In case of using Javascript libraries like Apollo server, additional files/codes are needed to write the <a href="https://github.com/serverless/serverless-graphql/blob/master/app-backend/dynamodb/schema.js" target="_blank" rel="noopener noreferrer">schema</a> and <a href="https://github.com/serverless/serverless-graphql/blob/master/app-backend/dynamodb/resolvers.js" target="_blank" rel="noopener noreferrer">resolver</a>.
In case of using Python library like <a href="https://github.com/graphql-python/graphene" target="_blank" rel="noopener noreferrer">Graphene</a>, developers need to update .py files to import libraries, create class and queries, and to create schema and resolver. </p></div></div><p>  A few suggestions are given below:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="post_copy_request_to_queue"></a>post_copy_request_to_queue<a class="hash-link" href="#post_copy_request_to_queue" title="Direct link to heading">#</a></h4><ul><li>Developers might need to modify <code>get_metadata_sql(key_path)</code> and use the graphql query. See this <a href="https://docs.graphene-python.org/en/latest/execution/execute/" target="_blank" rel="noopener noreferrer">example</a>.</li><li>Update <code>test_post_copy_request_to_queue.py</code> based on changes in <code>post_copy_request_to_queue.py</code>. One test could be <code>test_get_metadata_sql_happy_path()</code></li><li><code>shared_recovery.update_status_for_file()</code> and <code>shared_recovery.post_entry_to_queue()</code> functions for sending to SQS might need to be removed and  replaced with code that leverages GraphQL to write to the database.</li><li>Additional changes are expected.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="copy_files_to_archive"></a>copy_files_to_archive<a class="hash-link" href="#copy_files_to_archive" title="Direct link to heading">#</a></h4><ul><li><code>shared_recovery.update_status_for_file()</code> and <code>shared_recovery.post_entry_to_queue()</code> functions for sending to SQS might need to be removed and replaced with code that leverages GraphQL to write to the database.</li><li>Additional changes are expected.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="request_files"></a>request_files<a class="hash-link" href="#request_files" title="Direct link to heading">#</a></h4><ul><li><code>shared_recovery.update_status_for_file()</code>, <code>shared_recovery.create_status_for_job()</code> and <code>shared_recovery.post_entry_to_queue()</code> functions for sending to SQS might need to be removed and replaced with code that leverages GraphQL to write to the database.</li><li><code>db_queue_url</code> arg in <code>inner_task()</code> will not be needed if SQS is not used.</li><li>Modify <code>process_granule()</code> function.</li><li>Additional changes are expected.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="request_status_for_granule"></a>request_status_for_granule<a class="hash-link" href="#request_status_for_granule" title="Direct link to heading">#</a></h4><ul><li>Modify <code>get_most_recent_job_id_for_granule()</code> function to use GraphQL query.</li><li>Modify <code>get_status_totals_for_job()</code> function to use GraphQL query.</li><li>Additional changes are expected.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="request_status_for_job"></a>request_status_for_job<a class="hash-link" href="#request_status_for_job" title="Direct link to heading">#</a></h4><ul><li>Modify <code>get_granule_status_entries_for_job()</code> function to use GraphQL query.</li><li>Modify <code>get_granule_status_entries_for_job()</code> function to use GraphQL query.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="db_deploy"></a>db_deploy<a class="hash-link" href="#db_deploy" title="Direct link to heading">#</a></h4><ul><li><code>app_db_exists()</code>, <code>app_schema_exists()</code>, <code>app_version_table_exists()</code> and <code>get_migration_version()</code> functions might need to be updated.</li><li>Additional changes are expected.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="post_to_database"></a>post_to_database<a class="hash-link" href="#post_to_database" title="Direct link to heading">#</a></h4><ul><li>This will need to be removed if GraphQL is used since it will write to the DB instead of SQS.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="graphql-server-recommendation"></a>GraphQL server recommendation<a class="hash-link" href="#graphql-server-recommendation" title="Direct link to heading">#</a></h3><p>Based on this research, GraphQL has a higher learning curve compared to other technologies and will take some time for developers to learn and then implement. If using Javascript libraries, developers should have good background in this language in order to execute this approach. Using some prebuilt GraphQL servers that automatically generates GraphQL schema and resolvers could save some time and simplify the design. Building a prototype in ORCA could reveal if it is worth the effort and time. However, using lambda, API gateway and SQS(the resources in existing ORCA architecture) seem to contain more resources and examples online than GraphQL.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="recommendation-1--hasura"></a>Recommendation #1- <a href="https://hasura.io/" target="_blank" rel="noopener noreferrer">Hasura</a><a class="hash-link" href="#recommendation-1--hasura" title="Direct link to heading">#</a></h4><ul><li>Hasura GraphQL engine can be deployed using using Docker and Docker Compose or using Hasura cloud. </li><li>The easiest way to set up Hasura GraphQL engine on local environment without any cost is using Docker. </li><li>It supports GraphQL on Postgres, AWS Aurora and seems to be compatible with the current ORCA architecture. </li><li>Cost to use the cloud is $99/month/project and supports upto 20GB data with $2/additional GB data. </li><li>Creating the server using the given <a href="https://github.com/hasura/graphql-engine/blob/stable/install-manifests/docker-compose/docker-compose.yaml" target="_blank" rel="noopener noreferrer"><code>docker-compose.yml</code></a> file will be easy and the server can be queried from the Hasura console. Instructions to create the server can be found <a href="https://hasura.io/docs/latest/graphql/core/getting-started/docker-simple.html#docker-simple" target="_blank" rel="noopener noreferrer">here</a>. \</li><li>Instructions on connecting Postgres to the GraphQL server can be found <a href="https://hasura.io/docs/latest/graphql/cloud/getting-started/cloud-databases/aws-postgres.html#cloud-db-aws-rds-postgres" target="_blank" rel="noopener noreferrer">here</a><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Hasura cloud service is not approved by NGAP so it cannot be used for now. However, developers can use the docker version for testing.</p></div></div></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="recommendation-2--apollo-server"></a>Recommendation #2- <a href="https://www.apollographql.com/" target="_blank" rel="noopener noreferrer">Apollo Server</a><a class="hash-link" href="#recommendation-2--apollo-server" title="Direct link to heading">#</a></h4><ul><li>This server has to be built from scratch and developer has to be familiar with Javascript. </li><li>It is completely free and has over 108,000 users and 400+ contributors which make it a good candidate to look into further for prototyping.</li><li>Developer has to write his  own GraphQL schema when using this method which could be time consuming.</li><li>Developers have to work with two libraries that are required by the server:<ul><li><a href="https://npm.im/apollo-server" target="_blank" rel="noopener noreferrer">apollo-server</a>: library for Apollo Server which defines the shape of the data and how to fetch it.</li><li><a href="https://www.npmjs.com/package/graphql" target="_blank" rel="noopener noreferrer">graphql</a>: library used to build a GraphQL schema and execute queries against it.</li></ul></li><li>Some examples of the schema and resolvers for this server can be found <a href="https://www.apollographql.com/docs/apollo-server/getting-started/" target="_blank" rel="noopener noreferrer">here</a>.</li><li>Once created, GraphQL queries can be executed from Apollo Sandbox console.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="recommendation-3--graphene"></a>Recommendation #3- <a href="https://github.com/graphql-python/graphene" target="_blank" rel="noopener noreferrer">Graphene</a><a class="hash-link" href="#recommendation-3--graphene" title="Direct link to heading">#</a></h4><ul><li>Python library with 9000+ users for building GraphQL schemas/types. Since all ORCA lambdas are written in Python, using this library will make it easier for code changes.</li><li>Instead of writing GraphQL Schema Definition Language, deveopers will use Python code to describe the data provided by the server.</li><li>Can be deployed using lambda function with the help of [SAM]<a href="https://github.com/ivanchoo/demo-aws-graphql-python/blob/master/template.yml" target="_blank" rel="noopener noreferrer">https://github.com/ivanchoo/demo-aws-graphql-python/blob/master/template.yml</a>) or cloudformation. So serverless approach will charge when it is only used. </li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="graphql-ide"></a>GraphQL IDE<a class="hash-link" href="#graphql-ide" title="Direct link to heading">#</a></h3><p>There are a few IDE that developers can use to interact with GraphQL API calls and query the server.</p><ul><li><a href="https://github.com/graphql/graphiql" target="_blank" rel="noopener noreferrer">GraphiQL</a>. The live IDE can be seen <a href="http://graphql.org/swapi-graphql" target="_blank" rel="noopener noreferrer">here</a>. </li><li><a href="https://github.com/graphql/graphql-playground" target="_blank" rel="noopener noreferrer">GraphQL Playground</a></li><li><a href="https://github.com/andev-software/graphql-ide" target="_blank" rel="noopener noreferrer">GraphQL IDE</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="useful-tools"></a>Useful tools<a class="hash-link" href="#useful-tools" title="Direct link to heading">#</a></h3><p>The following tools might be useful for developers while working with GraphQL</p><ul><li>GraphQL CLI- CLI for GraphQL development workflows.</li><li>GraphQL Docs- generates GraphQL documents. </li><li>GraphDoc- generates GraphQL documents.</li><li>GraphQL Network- useful for debugging.</li><li>GraphQL Voyager- for visualizing data relations.</li><li>GraphQL Config- useful for configuring dev environment with GraphQL schema.</li><li>GraphQL Bindings- SDK for sharing GraphQL APIs</li><li>GraphQL Boilerplates- useful for backend projects.</li><li>Apollo Graph Manager-  useful for monitoring the performance and usage of GraphQL backend.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="references"></a>References<a class="hash-link" href="#references" title="Direct link to heading">#</a></h5><ul><li><a href="https://graphql.org/learn/queries/" target="_blank" rel="noopener noreferrer">https://graphql.org/learn/queries/</a></li><li><a href="https://github.com/graphql-python" target="_blank" rel="noopener noreferrer">https://github.com/graphql-python</a></li><li><a href="https://www.altexsoft.com/blog/engineering/graphql-core-features-architecture-pros-and-cons/" target="_blank" rel="noopener noreferrer">https://www.altexsoft.com/blog/engineering/graphql-core-features-architecture-pros-and-cons/</a></li><li><a href="https://hasura.io/docs/latest/graphql/core/index.html" target="_blank" rel="noopener noreferrer">https://hasura.io/docs/latest/graphql/core/index.html</a></li><li><a href="https://hasura.io/docs/latest/graphql/core/getting-started/docker-simple.html#docker-simple" target="_blank" rel="noopener noreferrer">https://hasura.io/docs/latest/graphql/core/getting-started/docker-simple.html#docker-simple</a></li><li><a href="https://www.moesif.com/blog/graphql/technical/Ways-To-Add-GraphQL-To-Your-Postgres-Database-Comparing-Hasura-Prisma-and-Others/" target="_blank" rel="noopener noreferrer">https://www.moesif.com/blog/graphql/technical/Ways-To-Add-GraphQL-To-Your-Postgres-Database-Comparing-Hasura-Prisma-and-Others/</a></li><li><a href="https://docs.graphene-python.org/en/latest/quickstart/" target="_blank" rel="noopener noreferrer">https://docs.graphene-python.org/en/latest/quickstart/</a></li><li><a href="https://github.com/ivanchoo/demo-aws-graphql-python" target="_blank" rel="noopener noreferrer">https://github.com/ivanchoo/demo-aws-graphql-python</a></li><li><a href="https://git.earthdata.nasa.gov/projects/CMRQL/repos/hackfest-cmr-graphql/browse" target="_blank" rel="noopener noreferrer">https://git.earthdata.nasa.gov/projects/CMRQL/repos/hackfest-cmr-graphql/browse</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/nasa/cumulus-orca/edit/develop/website/docs/developer/research/research-graphql.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cumulus-orca/docs/developer/research/research-AuroraServerless"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Aurora Serverless Research Notes</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a><ul><li><a href="#pros-and-cons" class="table-of-contents__link">Pros and cons</a></li><li><a href="#graphql-servers" class="table-of-contents__link">GraphQL Servers</a></li><li><a href="#prebuilt-graphql-servers" class="table-of-contents__link">Prebuilt GraphQL servers</a></li><li><a href="#building-own-graphql-servers" class="table-of-contents__link">Building own GraphQL servers</a></li><li><a href="#graphql-in-orca" class="table-of-contents__link">GraphQL in ORCA</a></li><li><a href="#graphql-server-recommendation" class="table-of-contents__link">GraphQL server recommendation</a></li><li><a href="#graphql-ide" class="table-of-contents__link">GraphQL IDE</a></li><li><a href="#useful-tools" class="table-of-contents__link">Useful tools</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/developer/quickstart/developer-intro">ORCA Developer Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/operator/operator-intro">ORCA Operator Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/ORCA+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">ORCA Working Group</a></li><li class="footer__item"><a href="https://github.com/nasa/cumulus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Project</a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Integrators+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Integrator Working Group</a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Operator+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Operator Working Group</a></li><li class="footer__item"><a href="https://nasa.github.io/cumulus/docs/cumulus-docs-readme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/cumulus-orca/assets/js/runtime~main.80f6c987.js"></script>
<script src="/cumulus-orca/assets/js/main.4a0e79b2.js"></script>
</body>
</html>