<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer/development-guide/code/versioning-releases">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">ORCA Versioning and Releases | Operational Recovery Cloud Archive (ORCA)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nasa.github.io//cumulus-orca/docs/developer/development-guide/code/versioning-releases"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ORCA Versioning and Releases | Operational Recovery Cloud Archive (ORCA)"><meta data-rh="true" name="description" content="Provides information to developers on semantic versioning and the release process."><meta data-rh="true" property="og:description" content="Provides information to developers on semantic versioning and the release process."><link data-rh="true" rel="icon" href="/cumulus-orca/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nasa.github.io//cumulus-orca/docs/developer/development-guide/code/versioning-releases"><link data-rh="true" rel="alternate" href="https://nasa.github.io//cumulus-orca/docs/developer/development-guide/code/versioning-releases" hreflang="en"><link data-rh="true" rel="alternate" href="https://nasa.github.io//cumulus-orca/docs/developer/development-guide/code/versioning-releases" hreflang="x-default"><link rel="stylesheet" href="/cumulus-orca/assets/css/styles.8acaa92e.css">
<link rel="preload" href="/cumulus-orca/assets/js/runtime~main.92d34172.js" as="script">
<link rel="preload" href="/cumulus-orca/assets/js/main.106c8a82.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cumulus-orca/"><div class="navbar__logo"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cumulus-orca/img/cumulus-orca-logo.svg" alt="ORCA site logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Operational Recovery Cloud Archive (ORCA)</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Developer Guide</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a><a class="navbar__item navbar__link" href="/cumulus-orca/docs/operator/operator-intro">Operator Guide</a><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/quickstart/developer-intro">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/cumulus-orca/docs/developer/development-guide/code/contrib-code-intro">Development Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/contrib-code-intro">Developing Code</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/contrib-code-intro">Code Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/setup-dev-env">Setting Up a Dev Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/clean-architecture">Clean Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/versioning-releases">ORCA Versioning and Releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/linting">Running Pylint Against Your Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/unit-tests">Unit Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/integration-tests">Integration Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/postgres-tests">Postgres Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/orca-logging">ORCA Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/code/parallel-scripting">Parallel Scripting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/cumulus-orca/docs/developer/development-guide/documentation/contrib-documentation-intro">Developing Documentation</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/deployment-guide/deployment">Deployment Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/api/orca-api">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cumulus-orca/docs/developer/research/research-intro">Research</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cumulus-orca/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development Guide</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developing Code</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ORCA Versioning and Releases</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ORCA Versioning and Releases</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="versioning">Versioning<a class="hash-link" href="#versioning" title="Direct link to heading">​</a></h2><p>The ORCA team uses semantic versioning. More information about semantic
versioning can be found <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-process">Release Process<a class="hash-link" href="#release-process" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-release-branch">Create a release branch<a class="hash-link" href="#create-a-release-branch" title="Direct link to heading">​</a></h3><p>From develop, create a new release branch from develop following the
<code>release-MAJOR.MINOR.x</code>. For example, <code>release-1.14.1</code>. Push this branch
to github if you created it locally.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-changelogmd">Update CHANGELOG.md<a class="hash-link" href="#update-changelogmd" title="Direct link to heading">​</a></h3><p>Update the <a href="https://github.com/nasa/cumulus-orca/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">CHANGELOG.md</a>.
Put a header under the &#x27;Unreleased&#x27; section with the new version number and
the date.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-git-tag-for-the-release">Create a git tag for the release<a class="hash-link" href="#create-a-git-tag-for-the-release" title="Direct link to heading">​</a></h3><p>Make sure you&#x27;re on the latest commit of the release branch.</p><p>Create and push a new git tag:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    git tag -a vx.y.z -m &quot;Release x.y.z&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    git push origin vx.y.z</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-deployment">Running the deployment<a class="hash-link" href="#running-the-deployment" title="Direct link to heading">​</a></h3><p>Publishing of new releases is handled by a Bamboo release plan and is manually
triggered.</p><p>If you created a new release branch in step one, you will need to create a new
bamboo deployment plan.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-bamboo-deployment-plan-branch">Creating a Bamboo deployment plan branch<a class="hash-link" href="#creating-a-bamboo-deployment-plan-branch" title="Direct link to heading">​</a></h4><ol><li>The deployment plan is already created in Bamboo using <a href="https://github.com/nasa/cumulus-orca/tree/develop/bamboo-specs" target="_blank" rel="noopener noreferrer">Bamboo Specs</a>.</li><li>If you have updated the <code>bamboo.yaml</code> config file, you will need to import the updated spec file from Bamboo specs UI. Under <code>Specs</code> section, click on the <code>Set up Specs Repository</code>. On the <code>Project Type</code>, select <code>Build Project</code> and then <code>ORCA</code>. On the Specs repository, select the repository host as <code>orca-develop</code>. Note that choosing the wrong repository branch will cause issues in deployment. <code>ORCA repo</code> repository host is for <code>master</code> branch and <code>orca test branch</code> host is for <code>feature/ORCA-test-bamboo</code> branch used for testing and prototyping. Contact <code>Venku Jayanti</code> from CI/CD team for additional support.</li><li>In the ORCA project (<a href="https://ci.earthdata.nasa.gov/browse/ORCA-OI" target="_blank" rel="noopener noreferrer">https://ci.earthdata.nasa.gov/browse/ORCA-OI</a>), scroll to the top left of the page where it indicates <code>Plan branch</code>. From the <code>Plan branch</code> dropdown menu, select the release branch you created for the release which should be in the format <code>release-X.X.X</code>.</li><li>Once inside the release branch page, scroll to the top right of the page and click <code>Actions</code>-&gt; <code>Configure branch</code>.</li><li>On the <code>Plan branch configuration</code> page, under <code>Plan branch configuration</code>, enable &#x27;Change Trigger&#x27;. Set the
Trigger type to manual, and this will prevent commits to the branch from triggering the build plan.</li><li>Click on the <code>Variables</code> tab.
Ensure that you are on your branch plan and not the master plan. Click on the <code>Choose from inherited variables</code> dropdown menu.
except in special cases such as incompatible backport branches. Then add and set the following variables:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * ORCA_VERSION: `&lt;version number&gt;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * RELEASE_FLAG: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * SECRET_GITHUB_EMAIL: `&lt;secret github email&gt;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * SECRET_GITHUB_TOKEN: `&lt;secret github token&gt;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> * SECRET_GITHUB_USER: `&lt;secret github user&gt;`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>   Contact ORCA team to know values of the three github variables.</li><li>Run the branch using the &#x27;Run&#x27; button in the top right.</li></ol><p>Bamboo will build and run unit tests against that tagged release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="finalizing-orca-release-on-github">Finalizing ORCA release on github<a class="hash-link" href="#finalizing-orca-release-on-github" title="Direct link to heading">​</a></h2><p>The release is automated in Bamboo, but the step must be manually started. If
you set the <code>RELEASE_FLAG</code> to <code>true</code> and the build steps passed, you will
be able to run the manual &#x27;Release&#x27; step in Bamboo. Make sure to use the <code>ORCA Integrator</code> plan under ORCA on bamboo website for performing a release.</p><p>The CI release scripts will create a release based on the release version tag,
as well as uploading release artifacts to the Github release for the Terraform
modules provided by Cumulus. The Terraform release artifacts include:</p><ul><li>A multi-module Terraform .zip artifact containing filtered copies of the
tf-modules, packages, and tasks directories for use as Terraform module sources.</li></ul><p>Just make sure to verify the appropriate .zip files are present on Github after
the release process is complete.</p><p><strong>Merge the base branch back into develop and master</strong></p><p>If this is the latest version, you need to merge the version update changes back into master, then synchronize master and develop.</p><ol><li>Create a PR to merge the release branch into master.</li><li>Once complete, create a PR to merge master into develop.
This should only contain changes from the release process.</li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Note: </div><div class="admonitionContent_S0QG"><p>Do not squash this merge. Doing so will make the &quot;compare&quot; view from step 4
show an incorrect diff, because the tag is linked to a specific commit on the
base branch.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-and-regenerate-the-tag">Delete and regenerate the tag<a class="hash-link" href="#delete-and-regenerate-the-tag" title="Direct link to heading">​</a></h3><p>To delete a published tag to re-tag, follow these steps:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    git tag -d vx.y.z</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    git push -d origin vx.y.z</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-orca-buckets-rds-cluster-and-cumulus-orca-modules-via-bamboo">Deploying ORCA buckets, RDS cluster and Cumulus ORCA modules via bamboo<a class="hash-link" href="#deploying-orca-buckets-rds-cluster-and-cumulus-orca-modules-via-bamboo" title="Direct link to heading">​</a></h2><p>For testing purposes, you should use your feature branch in cumulus-orca github repo and <a href="https://ci.earthdata.nasa.gov/browse/ORCA-PL" target="_blank" rel="noopener noreferrer"><code>prototype-latest</code></a> bamboo plan so that it does not affect the ORCA github <code>develop</code> branch. The <code>prototype-latest</code> bamboo plan is linked to <code>feature/ORCA-test-bamboo</code> github branch as the default branch under cumulus-orca repo. In addition, if changes are made to the bamboo spec file <code>bamboo.yaml</code> in this default branch, you have to manually import the bamboo spec by choosing <code>orca test branch</code> as the linked repo.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>You should reset <code>feature/ORCA-test-bamboo</code> before using it.</p><ol><li>Rename <code>feature/ORCA-test-bamboo</code> to <code>feature/ORCA-test-bamboo-old</code></li><li>Create a new branch based off of your branch named <code>feature/ORCA-test-bamboo</code></li><li>In the new branch&#x27;s <code>bamboo.yaml</code>:
Delete all but one of the plans and the <code>ORCA-ODP</code> plan.
Change plan&#x27;s <code>name</code> to <code>prototype-latest</code>.
In each <code>repositories</code> element, change <code>orca-develop</code> to <code>orca test branch</code>.
In each <code>plan</code> element, change <code>OI</code>/<code>ODP</code> in <code>key</code> values to <code>PL</code></li></ol></div></div><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p><code>prototype-latest</code> exposes an ordering issue where the release stage must be run before deployment/integration checks can be run.
DO NOT RUN THE RELEASE STAGE FROM <code>PROTOTYPE-LATEST</code>
Comment the release stage out in <code>bamboo.yaml</code> at the top of the file, and under <code>stages:</code>. Note that indentation is not a reliable indicator of block length, so make sure that all release code, including <code>repositories</code>, <code>triggers</code>, and <code>branches</code>, are commented out.</p></div></div><p>You will use the <code>ORCA Deploy Plan</code> bamboo plan for deploying the resources. </p><p>After hitting the play button on <code>Deploy DR ORCA Buckets</code> stage in bamboo plan, but before hitting <code>Run</code> in the popup, replace the following variables with yours.</p><ul><li>PREFIX</li><li>DR_AWS_ACCESS_KEY_ID</li><li>DR_AWS_SECRET_ACCESS_KEY</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you are targeting your personal feature branch, you may set these and future variables on the Plan Branch under <code>variables</code>.
Otherwise, keep personalized/sensitive values out of the main build.</p></div></div><p>These are the ORCA buckets that will be created in the disaster recovery AWS account:</p><ul><li><code>&lt;PREFIX&gt;-orca-primary</code></li><li><code>&lt;PREFIX&gt;-orca-archive-worm</code></li><li><code>&lt;PREFIX&gt;-orca-reports</code></li><li><code>&lt;PREFIX&gt;-dr-tf-state</code> (for storing the terraform state file in DR account)</li></ul><p>Some of these buckets have cross-account IAM policies attached so that they can be accessed from the other cumulus sandbox.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Hitting &#x27;play&#x27; next to <code>Deploy DR ORCA buckets</code>, <code>Deploy Dev RDS Stack</code> and <code>Deploy Dev Cumulus and ORCA Stack</code> brings up a checkbox list to run multiple jobs at once. Note that none of the checkboxes should be checked.</p></div></div><p>The Cumulus and TF buckets as well as dynamoDB table in cumulus OU account are created automatically in the Bamboo <code>Deploy Cumulus buckets and Cumulus and Orca modules</code> stage.
These are the buckets that will be created in cumulus OU account:</p><ul><li><code>&lt;PREFIX&gt;-internal</code></li><li><code>&lt;PREFIX&gt;-level0</code></li><li><code>&lt;PREFIX&gt;-public</code></li><li><code>&lt;PREFIX&gt;-private</code></li><li><code>&lt;PREFIX&gt;-protected</code></li><li><code>&lt;PREFIX&gt;-tf-state</code> (for storing the terraform state file in cumulus OU account)</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>The <code>*-tf-state</code> buckets and dynamoDB tables will not be automatically removed by cleanup scripts.
Once you are done with your testing, and you have verified that cleanup is actually successful, manually delete these resources.</p></div></div><p>After hitting the play button on <code>Deploy Cumulus buckets and Cumulus and Orca modules</code>, but before hitting <code>Run</code> in the popup, replace the following variables with yours.</p><ul><li>CUMULUS_AWS_ACCESS_KEY_ID</li><li>CUMULUS_AWS_SECRET_ACCESS_KEY</li><li>PREFIX</li><li>DB_ADMIN_PASSWORD</li><li>DB_USER_PASSWORD</li><li>EARTHDATA_CLIENT_ID</li><li>EARTHDATA_CLIENT_PASSWORD</li><li>CUMULUS_ORCA_DEPLOY_TEMPLATE_VERSION</li></ul><p>This is because some variables are sensitive and some will vary depending upon the user running the pipeline. Hitting &#x27;play&#x27; next to any of the deployment and cleanup stages brings up a checkbox list to run multiple jobs at once. Note that none of the checkboxes should be checked.</p><p>The above buckets can also be created manually if desired by the user. Make sure to use the proper AWS access keys for configuration before running the commands.</p><p>The bucket can be created using the following CLI command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws s3api create-bucket --bucket </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">BUCKET_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">  --region us-west-2 --create-bucket-configuration </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LocationConstraint</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">us-west-2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The dynamodb table and bucket versioning can be created manually as well.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   aws dynamodb create-table </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --table-name </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PREFIX</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">-tf-locks </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --attribute-definitions </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">AttributeName</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">LockID,AttributeType</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">S </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --key-schema </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">AttributeName</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">LockID,KeyType</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">HASH </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --billing-mode PAY_PER_REQUEST </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --region us-west-2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      aws s3api put-bucket-versioning </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --bucket </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PREFIX</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">-tf-state </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --versioning-configuration </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">Status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Enabled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>An EC2 key pair can be created using the AWS CLI. Make sure to save the generated private key for connecting to this instance later.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws ec2 create-key-pair --key-name </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PREFIX</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> --query </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;KeyMaterial&#x27;</span><span class="token plain"> --output text </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PREFIX</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Make sure your AWS is configured to use the cumulus sandbox account by using that account&#x27;s AWS access keys before creating the EC2 key pair.</p></div></div><p>A new earthdata application will need to be created if not done previously which will give the values for <code>EARTHDATA_CLIENT_ID</code> and <code>EARTHDATA_CLIENT_PASSWORD</code>. If you already have the application, use the existing values. <code>CUMULUS_ORCA_DEPLOY_TEMPLATE_VERSION</code> is the branch you want to check out in the <a href="https://git.earthdata.nasa.gov/projects/ORCA/repos/cumulus-orca-deploy-template/browse" target="_blank" rel="noopener noreferrer">deployment repo</a> such as <code>v11.1.1-v4.0.1</code>.</p><p>Note that the jobs may need to be run multiple times to get past deployment errors if there is one. If an error is raised saying <code>Cloudwatch log groups already exist</code>, then manually delete all the cloudwatch log groups and corresponding lambdas having the same name as the log groups from the AWS console and retry running the job.</p><p><code>Clean up ORCA buckets and modules</code> and <code>Clean up DR ORCA buckets</code> can be run in sequence to remove most of the resources created by the deployment stages.
State buckets and lock tables will be left intact to aid in any cleanup issues/debugging.
Additionally, Cumulus&#x27;s RDS module will automatically create a final-snapshot <code>PREFIX-cumulus-rds-serverless-default-cluster-final-snapshot</code> that must be manually deleted.
To verify cleanup, check the stage logs for errors, and <a href="https://docs.aws.amazon.com/ARG/latest/userguide/find-resources-to-tag.html" target="_blank" rel="noopener noreferrer">check the AWS environment for additional resources</a> with the tag <code>Deployment=PREFIX</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nasa/cumulus-orca/edit/develop/website/docs/developer/development-guide/code/versioning-releases.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/cumulus-orca/docs/developer/development-guide/code/clean-architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Clean Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cumulus-orca/docs/developer/development-guide/code/linting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running Pylint Against Your Code</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#versioning" class="table-of-contents__link toc-highlight">Versioning</a></li><li><a href="#release-process" class="table-of-contents__link toc-highlight">Release Process</a><ul><li><a href="#create-a-release-branch" class="table-of-contents__link toc-highlight">Create a release branch</a></li><li><a href="#update-changelogmd" class="table-of-contents__link toc-highlight">Update CHANGELOG.md</a></li><li><a href="#create-a-git-tag-for-the-release" class="table-of-contents__link toc-highlight">Create a git tag for the release</a></li><li><a href="#running-the-deployment" class="table-of-contents__link toc-highlight">Running the deployment</a></li></ul></li><li><a href="#finalizing-orca-release-on-github" class="table-of-contents__link toc-highlight">Finalizing ORCA release on github</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#delete-and-regenerate-the-tag" class="table-of-contents__link toc-highlight">Delete and regenerate the tag</a></li></ul></li><li><a href="#deploying-orca-buckets-rds-cluster-and-cumulus-orca-modules-via-bamboo" class="table-of-contents__link toc-highlight">Deploying ORCA buckets, RDS cluster and Cumulus ORCA modules via bamboo</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/about/introduction/orca-intro">About ORCA</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/developer/quickstart/developer-intro">ORCA Developer Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/cookbook/cookbook-intro">ORCA Cookbooks</a></li><li class="footer__item"><a class="footer__link-item" href="/cumulus-orca/docs/operator/operator-intro">ORCA Operator Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/ORCA+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">ORCA Working Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/nasa/cumulus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Integrators+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Integrator Working Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki.earthdata.nasa.gov/display/CUMULUS/Cumulus+Operator+Working+Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Operator Working Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://nasa.github.io/cumulus/docs/cumulus-docs-readme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cumulus Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/nasa/cumulus-orca" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/cumulus-orca/assets/js/runtime~main.92d34172.js"></script>
<script src="/cumulus-orca/assets/js/main.106c8a82.js"></script>
</body>
</html>