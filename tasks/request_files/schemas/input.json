{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/nasa/cumulus-orca/blob/master/tasks/request_files/schemas/input.json",
  "title": "request_files Lambda Input",
  "description": "The input for the request_files Lambda.",
  "type": "object",
  "properties": {
    "config": {
      "description": "A dict with keys related to the copy target.",
      "type": "object",
      "properties": {
        "glacier_bucket": {
          "description": "The name of the bucket from which the files will be restored.",
          "type": "string"
        }
      },
      "required": ["glacier_bucket"]
    },
    "input": {
      "description": "A dict with properties related to individual copy targets.",
      "type": "object",
      "properties": {
        "job_id": {
          "description": "The unique identifier used for tracking requests. If not present, will be generated.",
          "type": "string"
        },
        "granules": {
          "description": "A list of objects representing individual files to restore.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "granuleId": {
                "description": "The id of the granule being restored.",
                "type": "string"
              },
              "keys": {
                "description": "Keys related to where the files will be located.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "key": {
                      "description": "Name of the file within the granule.  # TODO: This or example lies.",
                      "type": "string"
                    },
                    "dest_bucket": {
                      "description": "The bucket the restored file will be moved to after the restore completes.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "key",
                    "dest_bucket"
                  ]
                }
              }
            },
            "required": ["granuleId", "keys"]
          }
        }
      },
      "required": ["granules"]
    }
  },
  "required": [ "config", "input" ]
}