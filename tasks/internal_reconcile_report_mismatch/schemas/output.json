{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$id": "https://github.com/nasa/cumulus-orca/blob/master/tasks/internal_reconcile_report_mismatch/schemas/output.json",
    "title": "internal_reconcile_report_mismatch Lambda Output",
    "description": "The output for the internal_reconcile_report_mismatch Lambda.",
    "type": "object",
    "required": [
      "jobId",
      "anotherPage",
      "mismatches"
    ],
    "properties": {
        "jobId": {
            "type": "integer",
            "description": "The unique ID of the reconciliation job."
          },
        "anotherPage": {
          "description": "Indicates if more results can be retrieved on another page.",
          "type": "boolean"
        },
        "mismatches": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "collectionId",
              "granuleId",
              "fileName",
              "keyPath",
              "cumulusArchiveLocation",
              "orcaEtag",
              "s3Etag",
              "orcaLastUpdate",
              "s3LastUpdate",
              "orcaSizeinBytes",
              "s3SizeInBytes",
              "discrepancyType"

            ],
          "properties": {
            "collectionId": {
              "type": "string",
              "description": "Cumulus Collection ID value from the ORCA catalog."
            },
            "granuleId": {
                "type": "string",
                "description": "Cumulus granuleID value from the ORCA catalog."
              }, 
            "filename": {
                "type": "string",
                "description": "Filename of the object from the ORCA catalog."
              },
            "keyPath": {
                "type": "string",
                "description": "key path and filename of the object in the ORCA catalog."
              },
            "cumulusArchiveLocation": {
              "type": "string",
              "description": "Expected S3 bucket the object is located in Cumulus. From the ORCA catalog."
            },       
            "orcaEtag": {
                "type": "string",
                "description": "etag of the object as reported in the ORCA catalog."
              },
            "s3Etag": {
              "type": "string",
              "description": "etag of the object as reported in the S3 bucket"
            },
            "orcaLastUpdate": {
              "type": "string",
              "description": "The time, in milliseconds since 1 January 1970 UTC, that object was updated in the ORCA catalog.",
              "pattern": "^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?\\+00:00$"
            },
            "s3LastUpdate": {
              "type": "string",
              "description": "The time, in milliseconds since 1 January 1970 UTC, that object was updated in the S3 bucket.",
              "pattern": "^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?\\+00:00$"
            },
            "orcaSizeinBytes": {
              "type": "integer",
              "description": "Size in bytes of the object as reported in the ORCA catalog."
          },
          "s3SizeinBytes": {
            "type": "integer",
            "description": "Size in bytes of the object as reported in the S3 bucket."
        },
        "discrepancyType": {
          "type": "string",
          "description": "ype of discrepancy found during reconciliation."
      }
        }
      }
    }
  }
}
